<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
  <!DOCTYPE html>
  <html lang="en">
  
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntakeQ Appointments Widget</title>
    <style>
      :root {
        --primary-blue: #0066CC;
        --secondary-teal: #00B8A0;
        --accent-orange: #FF6B35;
        --dark-slate: #1A2B3A;
        --light-gray: #F8FAFC;
        --medium-gray: #64748B;
        --white: #FFFFFF;
        --border-color: #E2E8F0;
        --error-color: #EF4444;
        --success-color: #10B981;
        --font-family: 'Inter', sans-serif;
      }
  
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
  
      body {
        font-family: var(--font-family);
        font-size: 16px;
        line-height: 1.6;
        color: var(--dark-slate);
        background: var(--light-gray);
        padding: 20px;
      }
  
      .appointments-widget {
        max-width: 1200px;
        margin: 0 auto;
        background: var(--white);
        border-radius: 16px;
        padding: 32px;
        box-shadow: 0 10px 40px rgba(26, 43, 58, 0.1);
        border: 1px solid var(--border-color);
      }
  
      .widget-header {
        text-align: center;
        margin-bottom: 32px;
      }
  
      .widget-title {
        font-size: 28px;
        font-weight: 700;
        color: var(--dark-slate);
        margin-bottom: 8px;
      }
  
      .widget-subtitle {
        color: var(--medium-gray);
        font-size: 16px;
      }
  
      .date-selector {
        margin-bottom: 24px;
        display: flex;
        align-items: center;
        gap: 16px;
        flex-wrap: wrap;
      }
  
      .date-input-group {
        display: flex;
        align-items: center;
        gap: 8px;
      }
  
      .date-input-group label {
        font-weight: 600;
        color: var(--dark-slate);
      }
  
      .date-input-group input {
        padding: 10px 14px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s ease;
      }
  
      .date-input-group input:focus {
        outline: none;
        border-color: var(--primary-blue);
      }
  
      .refresh-button {
        background: var(--primary-blue);
        color: var(--white);
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }
  
      .refresh-button:hover {
        background: #0052A3;
        transform: translateY(-2px);
      }
  
      .refresh-button:disabled {
        background: var(--medium-gray);
        cursor: not-allowed;
        transform: none;
      }
  
      .loading-spinner {
        display: none;
        text-align: center;
        padding: 40px;
      }
  
      .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid var(--border-color);
        border-left: 4px solid var(--primary-blue);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 16px;
      }
  
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
  
        100% {
          transform: rotate(360deg);
        }
      }
  
      .error-message {
        background: #FEF2F2;
        border: 1px solid #FECACA;
        color: var(--error-color);
        padding: 16px;
        border-radius: 8px;
        margin-bottom: 24px;
        display: none;
      }
  
      .appointments-table-container {
        overflow-x: auto;
        margin-bottom: 24px;
      }
  
      .appointments-table {
        width: 100%;
        border-collapse: collapse;
        background: var(--white);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
  
      .appointments-table th {
        background: var(--light-gray);
        color: var(--dark-slate);
        font-weight: 600;
        padding: 16px 12px;
        text-align: left;
        border-bottom: 2px solid var(--border-color);
        white-space: nowrap;
      }
  
      .appointments-table td {
        padding: 16px 12px;
        border-bottom: 1px solid var(--border-color);
        color: var(--dark-slate);
      }
  
      .appointments-table tr:hover {
        background: var(--light-gray);
      }
  
      .appointments-table tr:last-child td {
        border-bottom: none;
      }
  
      .price-cell {
        font-weight: 600;
        color: var(--primary-blue);
      }
  
      .date-cell {
        font-weight: 500;
      }
  
      .no-appointments {
        text-align: center;
        padding: 60px 20px;
        color: var(--medium-gray);
      }
  
      .no-appointments-icon {
        font-size: 48px;
        margin-bottom: 16px;
        opacity: 0.5;
      }
  
      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px;
        margin-top: 24px;
      }
  
      .pagination-button {
        background: var(--white);
        border: 2px solid var(--border-color);
        color: var(--dark-slate);
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
      }
  
      .pagination-button:hover:not(:disabled) {
        border-color: var(--primary-blue);
        color: var(--primary-blue);
      }
  
      .pagination-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
  
      .pagination-button.active {
        background: var(--primary-blue);
        border-color: var(--primary-blue);
        color: var(--white);
      }
  
      .pagination-info {
        color: var(--medium-gray);
        font-size: 14px;
        margin: 0 16px;
      }
  
      .appointments-count {
        text-align: center;
        margin-bottom: 16px;
        color: var(--medium-gray);
        font-size: 14px;
      }
  
      @media (max-width: 768px) {
        .appointments-widget {
          padding: 20px;
          margin: 10px;
        }
  
        .date-selector {
          flex-direction: column;
          align-items: stretch;
        }
  
        .date-input-group {
          justify-content: space-between;
        }
  
        .appointments-table {
          font-size: 14px;
        }
  
        .appointments-table th,
        .appointments-table td {
          padding: 12px 8px;
        }
  
        .pagination {
          flex-wrap: wrap;
        }
      }
  
      @media (max-width: 600px) {
  
        .appointments-table th:nth-child(4),
        .appointments-table td:nth-child(4),
        .appointments-table th:nth-child(5),
        .appointments-table td:nth-child(5) {
          display: none;
        }
      }
    </style>
  </head>
  
  <body>
    <div class="appointments-widget">
      <div class="widget-header">
        <h1 class="widget-title">IntakeQ Appointments</h1>
        <p class="widget-subtitle">View confirmed appointments for selected date</p>
      </div>
  
      <div class="date-selector">
        <div class="date-input-group">
          <label for="appointment-date">Select Date:</label>
          <input type="date" id="appointment-date">
        </div>
        <button class="refresh-button" id="refresh-btn">
                  <span id="refresh-icon">üîÑ</span>
                  <span id="refresh-text">Load Appointments</span>
              </button>
      </div>
  
      <div class="error-message" id="error-message"></div>
  
      <div class="loading-spinner" id="loading-spinner">
        <div class="spinner"></div>
        <p>Loading appointments...</p>
      </div>
  
      <div id="appointments-content" style="display: none;">
        <div class="appointments-count" id="appointments-count"></div>
  
        <div class="appointments-table-container">
          <table class="appointments-table">
            <thead>
              <tr>
                <th>Client Name</th>
                <th>Service Name</th>
                <th>Date & Time</th>
                <th>Practitioner</th>
                <th>Location</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody id="appointments-tbody"></tbody>
          </table>
        </div>
  
        <div class="pagination" id="pagination" style="display: none;"></div>
      </div>
  
      <div class="no-appointments" id="no-appointments" style="display: none;">
        <div class="no-appointments-icon">üìÖ</div>
        <h3>No Appointments Found</h3>
        <p>There are no confirmed appointments for the selected date.</p>
      </div>
    </div>
  
    <script>
      class IntakeQAppointmentsWidget {
              constructor() {
                  this.apiKey = '2b6f1ebbd77ed61fa246625228e4e36879bd6030';
                  this.baseUrl = 'https://intakeq.com/api/v1';
                  this.currentPage = 1;
                  this.appointmentsPerPage = 10;
                  this.allAppointments = [];
                  this.init();
              }
  
              init() {
                  this.setupEventListeners();
                  this.setDefaultDate();
              }
  
              setupEventListeners() {
                  const refreshBtn = document.getElementById('refresh-btn');
                  const dateInput = document.getElementById('appointment-date');
  
                  refreshBtn.addEventListener('click', () => this.loadAppointments());
                  
                  dateInput.addEventListener('change', () => {
                      this.currentPage = 1;
                      this.loadAppointments();
                  });
  
                  // Load appointments for today by default
                  this.loadAppointments();
              }
  
              setDefaultDate() {
                  const today = new Date().toISOString().split('T')[0];
                  document.getElementById('appointment-date').value = today;
              }
  
              async loadAppointments() {
                  const dateInput = document.getElementById('appointment-date');
                  const selectedDate = dateInput.value;
  
                  if (!selectedDate) {
                      this.showError('Please select a date');
                      return;
                  }
  
                  this.showLoading();
                  this.hideError();
  
                  try {
                      const appointments = await this.fetchAppointments(selectedDate);
                      this.allAppointments = appointments;
                      this.displayAppointments();
                  } catch (error) {
                      console.error('Error loading appointments:', error);
                      this.showError('Failed to load appointments. Please check your connection and try again.');
                  } finally {
                      this.hideLoading();
                  }
              }
  
              async fetchAppointments(startDate) {
                  const url = `${this.baseUrl}/appointments?status=Confirmed&startDate=${startDate}`;
                  
                  const response = await fetch(url, {
                      method: 'GET',
                      headers: {
                          'Authorization': `Bearer ${this.apiKey}`,
                          'Accept': 'application/json',
                          'Content-Type': 'application/json'
                      }
                  });
  
                  if (!response.ok) {
                      if (response.status === 401) {
                          throw new Error('Invalid API key or unauthorized access');
                      } else if (response.status === 403) {
                          throw new Error('Access forbidden. Please check your API permissions');
                      } else if (response.status === 429) {
                          throw new Error('Rate limit exceeded. Please try again later');
                      } else {
                          throw new Error(`HTTP error! status: ${response.status}`);
                      }
                  }
  
                  const data = await response.json();
                  return Array.isArray(data) ? data : [];
              }
  
              displayAppointments() {
                  const appointmentsContent = document.getElementById('appointments-content');
                  const noAppointments = document.getElementById('no-appointments');
                  const tbody = document.getElementById('appointments-tbody');
                  const countElement = document.getElementById('appointments-count');
  
                  if (this.allAppointments.length === 0) {
                      appointmentsContent.style.display = 'none';
                      noAppointments.style.display = 'block';
                      return;
                  }
  
                  noAppointments.style.display = 'none';
                  appointmentsContent.style.display = 'block';
  
                  // Update count
                  countElement.textContent = `${this.allAppointments.length} appointment${this.allAppointments.length !== 1 ? 's' : ''} found`;
  
                  // Calculate pagination
                  const startIndex = (this.currentPage - 1) * this.appointmentsPerPage;
                  const endIndex = startIndex + this.appointmentsPerPage;
                  const appointmentsToShow = this.allAppointments.slice(startIndex, endIndex);
  
                  // Clear existing rows
                  tbody.innerHTML = '';
  
                  // Add appointment rows
                  appointmentsToShow.forEach(appointment => {
                      const row = this.createAppointmentRow(appointment);
                      tbody.appendChild(row);
                  });
  
                  // Setup pagination
                  this.setupPagination();
              }
  
              createAppointmentRow(appointment) {
                  const row = document.createElement('tr');
                  
                  const clientName = appointment.ClientName || 'N/A';
                  const serviceName = appointment.ServiceName || 'N/A';
                  const practitionerName = appointment.PractitionerName || 'N/A';
                  const locationName = appointment.LocationName || 'N/A';
                  const price = appointment.Price ? `$${parseFloat(appointment.Price).toFixed(2)}` : 'N/A';
                  
                  // Format date
                  let formattedDate = 'N/A';
                  if (appointment.StartDateLocalFormatted) {
                      try {
                          const date = new Date(appointment.StartDateLocalFormatted);
                          formattedDate = date.toLocaleDateString('en-US', {
                              month: 'short',
                              day: '2-digit',
                              year: 'numeric'
                          }) + ' - ' + date.toLocaleTimeString('en-US', {
                              hour: 'numeric',
                              minute: '2-digit',
                              hour12: true
                          });
                      } catch (e) {
                          formattedDate = appointment.StartDateLocalFormatted;
                      }
                  }
  
                  row.innerHTML = `
                      <td>${this.escapeHtml(clientName)}</td>
                      <td>${this.escapeHtml(serviceName)}</td>
                      <td class="date-cell">${this.escapeHtml(formattedDate)}</td>
                      <td>${this.escapeHtml(practitionerName)}</td>
                      <td>${this.escapeHtml(locationName)}</td>
                      <td class="price-cell">${this.escapeHtml(price)}</td>
                  `;
  
                  return row;
              }
  
              setupPagination() {
                  const paginationContainer = document.getElementById('pagination');
                  const totalPages = Math.ceil(this.allAppointments.length / this.appointmentsPerPage);
  
                  if (totalPages <= 1) {
                      paginationContainer.style.display = 'none';
                      return;
                  }
  
                  paginationContainer.style.display = 'flex';
                  paginationContainer.innerHTML = '';
  
                  // Previous button
                  const prevBtn = document.createElement('button');
                  prevBtn.className = 'pagination-button';
                  prevBtn.textContent = '‚Üê Previous';
                  prevBtn.disabled = this.currentPage === 1;
                  prevBtn.addEventListener('click', () => {
                      if (this.currentPage > 1) {
                          this.currentPage--;
                          this.displayAppointments();
                      }
                  });
                  paginationContainer.appendChild(prevBtn);
  
                  // Page info
                  const pageInfo = document.createElement('span');
                  pageInfo.className = 'pagination-info';
                  pageInfo.textContent = `Page ${this.currentPage} of ${totalPages}`;
                  paginationContainer.appendChild(pageInfo);
  
                  // Next button
                  const nextBtn = document.createElement('button');
                  nextBtn.className = 'pagination-button';
                  nextBtn.textContent = 'Next ‚Üí';
                  nextBtn.disabled = this.currentPage === totalPages;
                  nextBtn.addEventListener('click', () => {
                      if (this.currentPage < totalPages) {
                          this.currentPage++;
                          this.displayAppointments();
                      }
                  });
                  paginationContainer.appendChild(nextBtn);
              }
  
              showLoading() {
                  document.getElementById('loading-spinner').style.display = 'block';
                  document.getElementById('appointments-content').style.display = 'none';
                  document.getElementById('no-appointments').style.display = 'none';
                  document.getElementById('refresh-btn').disabled = true;
                  document.getElementById('refresh-text').textContent = 'Loading...';
              }
  
              hideLoading() {
                  document.getElementById('loading-spinner').style.display = 'none';
                  document.getElementById('refresh-btn').disabled = false;
                  document.getElementById('refresh-text').textContent = 'Load Appointments';
              }
  
              showError(message) {
                  const errorElement = document.getElementById('error-message');
                  errorElement.textContent = message;
                  errorElement.style.display = 'block';
              }
  
              hideError() {
                  document.getElementById('error-message').style.display = 'none';
              }
  
              escapeHtml(text) {
                  const div = document.createElement('div');
                  div.textContent = text;
                  return div.innerHTML;
              }
          }
  
          // Initialize the widget when the DOM is loaded
          document.addEventListener('DOMContentLoaded', () => {
              new IntakeQAppointmentsWidget();
          });
    </script>
  </body>
  
  </html>

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-44WEBDZB6F"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-44WEBDZB6F');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Book Your Treatment | Stay Dripped IV & Wellness Co.</title>
  <meta name="description"
    content="Complete booking system for mobile IV therapy, supplements, testing, and wellness services in Scottsdale, AZ.">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Navigation CSS -->
  <link rel="stylesheet" href="../shared/navigation.css">

  <style>
    :root {
      --primary-blue: #0066CC;
      --secondary-teal: #00B8A0;
      --accent-orange: #FF6B35;
      --warm-beige: #F5F1EB;
      --soft-green: #8BC34A;
      --dark-slate: #1A2B3A;
      --light-gray: #F8FAFC;
      --warm-gray: #F7F5F3;
      --medium-gray: #64748B;
      --warm-text: #2D3748;
      --white: #FFFFFF;
      --border-color: #E2E8F0;
      --soft-border: #F0EDE8;
      --font-family: 'Inter', sans-serif;
      --max-width: 1200px;
    }

    < !-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-44WEBDZB6F"></script><script>window.dataLayer=window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'G-44WEBDZB6F');

    </script><meta charset="UTF-8"/><meta name="viewport"content="width=device-width,initial-scale=1.0"/><meta http-equiv="X-UA-Compatible"content="IE=edge"/><title>Book & Checkout | Stay Dripped IV & Wellness Co.</title><meta name="description"content="Select your service, schedule, and complete checkout for mobile IV therapy, NAD+, peptides, vitamin injections, weight programs, telehealth, and mobile testing in Scottsdale AZ.">< !-- Fonts --><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"rel="stylesheet">< !-- Shared Navigation CSS (optional external) --><link rel="stylesheet"href="../shared/navigation.css">body {
      font-family: var(--font-family);
      font-size: 16px;
      line-height: 1.6;
      color: var(--dark-slate);
      background: var(--light-gray);
      padding-top: 140px;
    }

    <style> :root {
      --primary-blue: #0066CC;
      --secondary-teal: #00B8A0;
      --accent-orange: #FF6B35;
      --dark-slate: #1A2B3A;
      --light-gray: #F8FAFC;
      --warm-gray: #F7F5F3;
      --medium-gray: #64748B;
      --white: #FFFFFF;
      --border-color: #E2E8F0;
      --soft-border: #F0EDE8;
      --soft-green: #10B981;
      --font: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      --max-width: 1200px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0
    }

    body {
      font-family: var(--font);
      font-size: 16px;
      line-height: 1.6;
      color: var(--dark-slate);
      background: var(--light-gray);
      padding-top: 120px
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 20px
    }

    .main-content {
      padding: 40px 0
    }

    /* Page Header */
    .page-header {
      background: #fff;
      border-radius: 16px;
      padding: 32px 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, .08);
      text-align: center;
      margin-bottom: 24px
    }

    .page-title {
      font-size: 36px;
      font-weight: 800;
      margin-bottom: 8px
    }

    .page-subtitle {
      color: var(--medium-gray);
      max-width: 850px;
      margin: 0 auto
    }

    /* Progress Indicator */
    .progress-container {
      background: var(--white);
      padding: 20px 0;
      margin-bottom: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .progress-indicator {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 24px;
      max-width: 600px;
      margin: 0 auto;
    }

    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      position: relative;
    }

    .step-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--border-color);
      color: var(--medium-gray);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .progress-step.active .step-circle {
      background: var(--primary-blue);
      color: var(--white);
    }

    .progress-step.completed .step-circle {
      background: var(--soft-green);
      color: var(--white);
    }

    .step-label {
      font-size: 12px;
      font-weight: 500;
      color: var(--medium-gray);
      text-align: center;
    }

    .progress-step.active .step-label {
      color: var(--primary-blue);
      font-weight: 600;
    }

    .progress-line {
      height: 2px;
      width: 60px;
      background: var(--border-color);
      margin-top: 20px;
    }

    .progress-line.completed {
      background: var(--soft-green);
    }

    /* Main Content */
    .booking-main {
      background: var(--white);
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      margin-bottom: 24px;
      min-height: 600px;
    }

    .step-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .step-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--dark-slate);
      margin-bottom: 12px;
    }

    .step-subtitle {
      font-size: 16px;
      color: var(--medium-gray);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Service Selection */
    .service-category {
      margin-bottom: 32px;
    }

    .category-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--border-color);
    }

    .service-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }

    .service-card {
      border: 2px solid var(--border-color);
      border-radius: 12px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--white);
      position: relative;
    }

    .service-card:hover {
      border-color: var(--primary-blue);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 102, 204, 0.15);
    }

    .service-card.selected {
      border-color: var(--primary-blue);
      background: rgba(0, 102, 204, 0.05);
    }

    .service-card .service-icon {
      width: 48px;
      height: 48px;
      background: var(--primary-blue);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 16px;
      color: var(--white);
    }

    .service-card h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 8px;
    }

    .service-card p {
      color: var(--medium-gray);
      margin-bottom: 12px;
      font-size: 14px;
      line-height: 1.5;
    }

    .service-price {
      font-size: 16px;
      font-weight: 700;
      color: var(--primary-blue);
    }

    .selected-indicator {
      position: absolute;
      top: 12px;
      right: 12px;
      width: 24px;
      height: 24px;
      background: var(--soft-green);
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      color: var(--white);
      font-size: 12px;
    }

    .service-card.selected .selected-indicator {
      display: flex;
    }

    /* Form Styles */
    .form-section {
      margin-bottom: 32px;
    }

    .form-section h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 16px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--dark-slate);
      font-size: 14px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 12px 16px;
      border: 2px solid var(--border-color);
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
      background: var(--white);
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
    }

    .required {
      color: var(--accent-orange);
    }

    /* Schedule Selection */
    .schedule-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      margin-bottom: 24px;
    }

    .calendar-container {
      border: 2px solid var(--border-color);
      border-radius: 12px;
      padding: 20px;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .calendar-nav {
      background: none;
      border: none;
      color: var(--primary-blue);
      font-size: 18px;
      cursor: pointer;
      padding: 8px;
      border-radius: 4px;
    }

    .calendar-nav:hover {
      background: var(--light-gray);
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
    }

    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .calendar-day:hover {
      background: var(--light-gray);
    }

    .calendar-day.selected {
      background: var(--primary-blue);
      color: var(--white);
    }

    .calendar-day.disabled {
      color: var(--border-color);
      cursor: not-allowed;
    }

    .time-slots {
      border: 2px solid var(--border-color);
      border-radius: 12px;
      padding: 20px;
    }

    .time-slots h4 {
      margin-bottom: 16px;
      color: var(--dark-slate);
    }

    .time-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .time-slot {
      padding: 12px 16px;
      border: 2px solid var(--border-color);
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
      font-weight: 500;
    }

    .time-slot:hover {
      border-color: var(--primary-blue);
      background: rgba(0, 102, 204, 0.05);
    }

    .time-slot.selected {
      border-color: var(--primary-blue);
      background: var(--primary-blue);
      color: var(--white);
    }

    .time-slot.unavailable {
      background: var(--light-gray);
      color: var(--medium-gray);
      cursor: not-allowed;
    }

    /* Payment Methods */
    .payment-methods {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .payment-method {
      border: 2px solid var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--white);
    }

    .payment-method:hover {
      border-color: var(--primary-blue);
      transform: translateY(-2px);
    }

    .payment-method.selected {
      border-color: var(--primary-blue);
      background: rgba(0, 102, 204, 0.05);
    }

    .payment-icon {
      font-size: 32px;
      margin-bottom: 12px;
    }

    .payment-label {
      font-size: 14px;
      font-weight: 600;
      color: var(--dark-slate);
    }

    /* Order Summary */
    .order-summary {
      background: var(--light-gray);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .order-summary h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 16px;
    }

    .summary-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid var(--border-color);
    }

    .summary-item:last-child {
      border-bottom: none;
      font-weight: 700;
      font-size: 18px;
      color: var(--primary-blue);
      margin-top: 8px;
      padding-top: 16px;
      border-top: 2px solid var(--border-color);
    }

    /* Buttons */
    .btn {
      background: var(--primary-blue);
      color: var(--white);
      padding: 16px 32px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 16px;
    }

    .btn:hover {
      background: #0052A3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
    }

    .btn:disabled {
      background: var(--medium-gray);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary-blue);
      border: 2px solid var(--primary-blue);
    }

    .btn-secondary:hover {
      background: var(--primary-blue);
      color: var(--white);
    }

    .btn-full {
      width: 100%;
      margin-top: 24px;
    }

    .button-group {
      display: flex;
      gap: 16px;
      justify-content: center;
      margin-top: 32px;
    }

    /* Confirmation */
    .confirmation-icon {
      width: 80px;
      height: 80px;
      background: var(--soft-green);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      color: var(--white);
      font-size: 40px;
    }

    .confirmation-details {
      background: var(--light-gray);
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid var(--border-color);
    }

    .detail-row:last-child {
      border-bottom: none;
    }

    /* Loading States */
    .loading {
      position: relative;
      pointer-events: none;
    }

    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin-left: -10px;
      margin-top: -10px;
      border: 2px solid transparent;
      border-top: 2px solid var(--white);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Error States */
    .error-message {
      background: #fee;
      border: 1px solid #fcc;
      color: #c33;
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      display: none;
    }

    .form-group.error input,
    .form-group.error select {
      border-color: #c33;
    }

    /* Mobile Responsiveness */
    @media (max-width: 768px) {
      body {
        padding-top: 120px;
      }

      .booking-main {
        padding: 24px;
      }

      .service-grid {
        grid-template-columns: 1fr;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .schedule-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .time-grid {
        grid-template-columns: 1fr;
      }

      .payment-methods {
        grid-template-columns: repeat(2, 1fr);
      }

      .button-group {
        flex-direction: column;
      }

      .progress-indicator {
        gap: 12px;
      }

      .progress-line {
        width: 30px;
      }

      .step-label {
        font-size: 10px;
      }
    }

    /* Hide steps */
    .step {
      display: none;
    }

    .step.active {
      display: block;
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
  /* Quick service cards */
  .service-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin:24px 0 6px}
  .service-card{background:#fff;border:1px solid
  var(--border-color);border-radius:16px;padding:22px;text-align:center;transition:.25s;border-left:4px solid
  transparent}
  .service-card:hover{transform:translateY(-4px);border-left-color:var(--primary-blue);box-shadow:0 10px 24px
  rgba(0,102,204,.12)}
  .service-icon{font-size:38px;margin-bottom:10px}
  .service-title{font-size:20px;font-weight:700}
  .service-description{color:var(--medium-gray);font-size:14px;margin:6px 0 8px}
  .service-price{font-weight:700;color:var(--primary-blue);margin-bottom:12px}

  /* Buttons */
  .btn{background:var(--primary-blue);color:#fff;border:none;border-radius:10px;padding:11px
  18px;font-weight:700;display:inline-flex;gap:8px;align-items:center;cursor:pointer;text-decoration:none;transition:.25s}
  .btn:hover{background:#0052A3;transform:translateY(-2px)}
  .btn-secondary{background:transparent;color:var(--primary-blue);border:2px solid var(--primary-blue)}
  .btn-secondary:hover{background:var(--primary-blue);color:#fff}
  .btn-large{padding:14px 24px;font-size:18px}
  .btn-ghost{background:transparent;color:var(--dark-slate);border:1px dashed var(--border-color)}

  /* Selector */
  .section-header{text-align:center;margin:28px 0 12px}
  .section-title{font-size:28px;font-weight:800}
  .service-categories{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
  .service-category{background:#fff;border:1px solid
  var(--border-color);border-radius:12px;padding:14px;cursor:pointer;text-align:center;transition:.2s}
  .service-category:hover{border-color:var(--primary-blue)}
  .service-category.active{outline:3px solid rgba(0,102,204,.15);border-color:var(--primary-blue)}
  .service-details{display:none;margin-top:12px}
  .service-details.active{display:block}
  .service-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
  .service-option{background:#fff;border:1px solid
  var(--border-color);border-radius:12px;padding:12px;cursor:pointer;transition:.2s}
  .service-option:hover{border-color:var(--primary-blue)}
  .service-option.selected{border-color:var(--primary-blue);background:#EEF6FF}
  .option-name{font-weight:800}
  .option-description{color:var(--medium-gray);font-size:14px;margin:6px 0}
  .option-price{color:var(--primary-blue);font-weight:800}

  /* Booking form */
  .booking-form-section{display:none;background:#fff;border:1px solid
  var(--border-color);border-radius:16px;padding:22px;margin-top:16px}
  .booking-form-section.active{display:block}
  .form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
  .form-group{display:flex;flex-direction:column;gap:6px}
  label{font-weight:700;font-size:14px}
  input,select,textarea{border:1px solid
  var(--border-color);border-radius:8px;padding:10px;font:inherit;background:#fff}
  textarea{min-height:100px;resize:vertical}
  .payment-summary{margin-top:12px;border:1px dashed
  var(--border-color);border-radius:12px;background:var(--warm-gray);padding:14px}
  .payment-summary h4{margin-bottom:8px}
  .summary-item{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--soft-border)}
  .summary-item:last-child{border-bottom:none}
  .summary-total span:last-child{color:var(--primary-blue);font-weight:900}
  .action-buttons{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}

  /* Success / Payment demo panel */
  .hidden{display:none!important}
  .success-wrap{display:none;justify-content:center;margin:28px 0}
  .success-wrap.active{display:flex}
  .payment-container{max-width:680px;width:100%;background:#fff;border:1px solid
  var(--border-color);border-radius:16px;padding:32px;box-shadow:0 8px 32px rgba(26,43,58,.08);text-align:center}
  .success-icon{width:84px;height:84px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--soft-green);color:#fff;font-size:40px;margin:0
  auto 14px}
  .payment-details{background:var(--light-gray);border-radius:12px;padding:18px;margin:16px 0;text-align:left}
  .detail-row{display:flex;justify-content:space-between;align-items:center;padding:9px 0;border-bottom:1px solid
  var(--border-color)}
  .detail-row:last-child{border-bottom:none}
  .total-row{font-weight:900;border-top:2px solid var(--border-color);padding-top:10px;margin-top:6px}
  .total-row span:last-child{color:var(--primary-blue)}

  /* Contact CTA */
  .contact-section{background:var(--primary-blue);color:#fff;border-radius:16px;padding:26px;text-align:center;margin-top:18px}
  .contact-buttons{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
  .contact-btn{background:#fff;color:var(--primary-blue);border:none;border-radius:10px;padding:12px
  18px;font-weight:700;text-decoration:none;display:inline-flex;gap:8px;align-items:center;transition:.25s}
  .contact-btn:hover{background:var(--light-gray);transform:translateY(-2px)}

  /* Footer */
  .footer{background:var(--dark-slate);color:#fff;margin-top:40px}
  .footer .container{padding:40px 20px}
  .footer-content{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:24px;margin-bottom:14px}
  .footer-section h3{font-size:18px;margin-bottom:8px}
  .footer-section p,.footer-section li{color:#B8C5D1}
  .footer-section a{color:#B8C5D1;text-decoration:none}
  .footer-section a:hover{color:#fff;text-decoration:underline}
  .footer-bottom{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;border-top:1px
  solid rgba(255,255,255,.12);padding-top:12px}
  .social-links{display:flex;gap:10px}

  /* Responsive */
  @media (max-width:768px){
  body{padding-top:100px}
  .page-title{font-size:28px}
  .form-grid{grid-template-columns:1fr}
  .btn{width:100%;justify-content:center}
  .contact-btn{width:100%;max-width:320px;justify-content:center}
  }
  </style>
</head>

<body>
  <!-- Dynamic Navigation Placeholder -->
  <div id="navigation-placeholder"></div>

  <main class="container">
    <!-- Progress Indicator -->
    <div class="progress-container">
      <div class="progress-indicator">
        <div class="progress-step active" data-step="1">
          <div class="step-circle">1</div>
          <div class="step-label">Select Service</div>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="2">
          <div class="step-circle">2</div>
          <div class="step-label">Book Time</div>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="3">
          <div class="step-circle">3</div>
          <div class="step-label">Your Info</div>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="4">
          <div class="step-circle">4</div>
          <div class="step-label">Payment</div>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="5">
          <div class="step-circle">5</div>
          <div class="step-label">Confirm</div>
        </div>
      </div>
    </div>

    <!-- Main Booking Content -->
    <div class="booking-main">
      <!-- Step 1: Service Selection -->
      <div class="step active" id="step-1">
        <div class="step-header">
          <h1 class="step-title">Choose Your Service</h1>
          <p class="step-subtitle">Select from our comprehensive range of mobile wellness treatments delivered to your
            location.</p>
        </div>

        <!-- IV Therapy Services -->
        <div class="service-category">
          <h2 class="category-title">IV Therapy & Injections</h2>
          <div class="service-grid">
            <div class="service-card" data-service="hydration" data-price="149">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">üíß</div>
              <h3>Hydration Plus</h3>
              <p>Essential electrolytes and fluids for optimal hydration and energy boost.</p>
              <div class="service-price">$149</div>
            </div>
            <div class="service-card" data-service="energy" data-price="199">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">‚ö°</div>
              <h3>Energy Boost</h3>
              <p>B-complex vitamins and nutrients for sustained energy and mental clarity.</p>
              <div class="service-price">$199</div>
            </div>
            <div class="service-card" data-service="immunity" data-price="225">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">üõ°Ô∏è</div>
              <h3>Immunity Support</h3>
              <p>Vitamin C, zinc, and immune-boosting nutrients to strengthen defenses.</p>
              <div class="service-price">$225</div>
            </div>
            <div class="service-card" data-service="recovery" data-price="275">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">üèÉ</div>
              <h3>Athletic Recovery</h3>
              <p>Amino acids and nutrients for muscle recovery and performance.</p>
              <div class="service-price">$275</div>
            </div>
            <div class="service-card" data-service="nad" data-price="350">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">üß¨</div>
              <h3>NAD+ Therapy</h3>
              <p>Advanced anti-aging and cellular repair therapy for longevity.</p>
              <div class="service-price">$350</div>
            </div>
            <div class="service-card" data-service="vitamins" data-price="35">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">üíâ</div>
              <h3>Vitamin Injections</h3>
              <p>Quick B12, vitamin D, and fat-burning shots for targeted wellness.</p>
              <div class="service-price">$35</div>
            </div>
          </div>
        </div>

        <!-- Wellness Programs -->
        <div class="service-category">
          <h2 class="category-title">Wellness Programs</h2>
          <div class="service-grid">
            <div class="service-card" data-service="weight" data-price="199">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">‚öñÔ∏è</div>
              <h3>Weight Management</h3>
              <p>Comprehensive weight loss program with GLP-1 medications and support.</p>
              <div class="service-price">$199</div>
            </div>
            <div class="service-card" data-service="sexual" data-price="125">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">‚ù§Ô∏è</div>
              <h3>Sexual Wellness</h3>
              <p>Discreet treatments for enhanced intimacy and sexual health.</p>
              <div class="service-price">$125</div>
            </div>
            <div class="service-card" data-service="testing" data-price="99">
              <div class="selected-indicator">‚úì</div>
              <div class="service-icon">üß™</div>
              <h3>Mobile Testing</h3>
              <p>Comprehensive health testing and lab work in your home or office.</p>
              <div class="service-price">$99</div>
            </div>
          </div>
        </div>

        <div class="button-group">
          <button class="btn btn-full" onclick="nextStep()" id="continue-step-1" disabled>Continue to Scheduling</button>
        </div>
      </div>

      <!-- Step 2: Schedule Selection -->
      <div class="step" id="step-2">
        <div class="step-header">
          <h1 class="step-title">Choose Date & Time</h1>
          <p class="step-subtitle">Select your preferred appointment date and time. We offer flexible scheduling to fit
            your busy lifestyle.</p>
        </div>

        <div class="schedule-grid">
          <div class="calendar-container">
            <div class="calendar-header">
              <button class="calendar-nav" onclick="previousMonth()">‚Äπ</button>
              <h3 id="calendar-month">March 2024</h3>
              <button class="calendar-nav" onclick="nextMonth()">‚Ä∫</button>
            </div>
            <div class="calendar-grid" id="calendar-grid">
              <!-- Calendar days will be generated by JavaScript -->
            </div>
          </div>

          <div class="time-slots">
            <h4>Available Times</h4>
            <div class="time-grid" id="time-grid">
              <div class="time-slot" data-time="9:00 AM">9:00 AM</div>
              <div class="time-slot" data-time="10:00 AM">10:00 AM</div>
              <div class="time-slot" data-time="11:00 AM">11:00 AM</div>
              <div class="time-slot" data-time="12:00 PM">12:00 PM</div>
              <div class="time-slot" data-time="1:00 PM">1:00 PM</div>
              <div class="time-slot" data-time="2:00 PM">2:00 PM</div>
              <div class="time-slot" data-time="3:00 PM">3:00 PM</div>
              <div class="time-slot" data-time="4:00 PM">4:00 PM</div>
              <div class="time-slot" data-time="5:00 PM">5:00 PM</div>
              <div class="time-slot" data-time="6:00 PM">6:00 PM</div>
            </div>
          </div>
        </div>

        <div class="button-group">
          <button class="btn btn-secondary" onclick="previousStep()">Back</button>
          <button class="btn" onclick="nextStep()" id="continue-step-2" disabled>Continue to Details</button>
        </div>
      </div>

      <!-- Step 3: Contact Information -->
      <div class="step" id="step-3">
        <div class="step-header">
          <h1 class="step-title">Your Information</h1>
          <p class="step-subtitle">We need some basic information to provide you with the best possible care and
            service.</p>
        </div>

        <form id="contact-form">
          <div class="form-section">
            <h3>Contact Information</h3>
            <div class="form-grid">
              <div class="form-group">
                <label for="first-name">First Name <span class="required">*</span></label>
                <input type="text" id="first-name" name="firstName" required>
              </div>
              <div class="form-group">
                <label for="last-name">Last Name <span class="required">*</span></label>
                <input type="text" id="last-name" name="lastName" required>
              </div>
              <div class="form-group">
                <label for="email">Email Address <span class="required">*</span></label>
                <input type="email" id="email" name="email" required>
              </div>
              <div class="form-group">
                <label for="phone">Phone Number <span class="required">*</span></label>
                <input type="tel" id="phone" name="phone" required>
              </div>
            </div>
          </div>

          <div class="form-section">
            <h3>Service Location</h3>
            <div class="form-grid">
              <div class="form-group full-width">
                <label for="address">Street Address <span class="required">*</span></label>
                <input type="text" id="address" name="address" required>
              </div>
              <div class="form-group">
                <label for="city">City <span class="required">*</span></label>
                <input type="text" id="city" name="city" value="Scottsdale" required>
              </div>
              <div class="form-group">
                <label for="state">State <span class="required">*</span></label>
                <select id="state" name="state" required>
                                    <option value="AZ" selected>Arizona</option>
                                    <option value="CA">California</option>
                                    <option value="NV">Nevada</option>
                                </select>
              </div>
              <div class="form-group">
                <label for="zip">ZIP Code <span class="required">*</span></label>
                <input type="text" id="zip" name="zip" required>
              </div>
            </div>
          </div>

          <div class="form-section">
            <h3>Special Requests</h3>
            <div class="form-group full-width">
              <label for="notes">Additional Notes (Optional)</label>
              <textarea id="notes" name="notes" rows="3" placeholder="Any special requests, allergies, or additional information..."></textarea>
            </div>
          </div>
        </form>

        <div class="button-group">
          <button class="btn btn-secondary" onclick="previousStep()">Back</button>
          <button class="btn" onclick="nextStep()" id="continue-step-3" disabled>Continue to Payment</button>
        </div>
      </div>

      <!-- Step 4: Payment -->
      <div class="step" id="step-4">
        <div class="step-header">
          <h1 class="step-title">Payment Information</h1>
          <p class="step-subtitle">Secure payment processing to complete your booking. Your payment information is
            encrypted and protected.</p>
        </div>

        <div class="order-summary">
          <h3>Order Summary</h3>
          <div id="order-items">
            <!-- Order items will be populated by JavaScript -->
          </div>
        </div>

        <div class="form-section">
          <h3>Payment Method</h3>
          <div class="payment-methods">
            <div class="payment-method selected" data-method="card">
              <div class="payment-icon">üí≥</div>
              <div class="payment-label">Credit Card</div>
            </div>
            <div class="payment-method" data-method="paypal">
              <div class="payment-icon">üÖøÔ∏è</div>
              <div class="payment-label">PayPal</div>
            </div>
            <div class="payment-method" data-method="apple">
              <div class="payment-icon">üçé</div>
              <div class="payment-label">Apple Pay</div>
            </div>
          </div>
        </div>

        <form id="payment-form">
          <div class="form-section" id="card-details">
            <h3>Card Details</h3>
            <div class="form-grid">
              <div class="form-group full-width">
                <label for="card-number">Card Number <span class="required">*</span></label>
                <input type="text" id="card-number" name="cardNumber" placeholder="1234 5678 9012 3456" required>
              </div>
              <div class="form-group">
                <label for="expiry">Expiry Date <span class="required">*</span></label>
                <input type="text" id="expiry" name="expiry" placeholder="MM/YY" required>
              </div>
              <div class="form-group">
                <label for="cvv">CVV <span class="required">*</span></label>
                <input type="text" id="cvv" name="cvv" placeholder="123" required>
              </div>
              <div class="form-group full-width">
                <label for="card-name">Name on Card <span class="required">*</span></label>
                <input type="text" id="card-name" name="cardName" required>
              </div>
            </div>
          </div>
        </form>

        <div class="error-message" id="payment-error"></div>

        <div class="button-group">
          <button class="btn btn-secondary" onclick="previousStep()">Back</button>
          <button class="btn" onclick="processPayment()" id="complete-booking">Complete Booking</button>
        </div>
      </div>

      <!-- Step 5: Confirmation -->
      <div class="step" id="step-5">
        <div class="step-header">
          <div class="confirmation-icon">‚úì</div>
          <h1 class="step-title">Booking Confirmed!</h1>
          <p class="step-subtitle">Your appointment has been successfully scheduled. You'll receive a confirmation email
            shortly.</p>
        </div>

        <div class="confirmation-details" id="confirmation-details">
          <!-- Confirmation details will be populated by JavaScript -->
        </div>

        <div class="button-group">
          <a href="../index.html" class="btn btn-secondary">Return Home</a>
          <button class="btn" onclick="bookAnother()">Book Another Service</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Load Navigation JavaScript -->
  <script src="../shared/navigation-loader-optimized.js"></script>

  <script>
    // Booking state
        let currentStep = 1;
        let selectedService = null;
        let selectedDate = null;
        let selectedTime = null;
        let paymentMethod = 'card';
        let bookingData = {};

        // Initialize booking system
        document.addEventListener('DOMContentLoaded', function() {
            initializeServiceSelection();
            initializeCalendar();
            initializeFormValidation();
            initializePaymentMethods();
        });

        // Service Selection
        function initializeServiceSelection() {
            const serviceCards = document.querySelectorAll('.service-card');
            
            serviceCards.forEach(card => {
                card.addEventListener('click', function() {
                    // Remove previous selection
                    serviceCards.forEach(c => c.classList.remove('selected'));
                    
                    // Select current card
                    this.classList.add('selected');
                    selectedService = {
                        id: this.dataset.service,
                        name: this.querySelector('h3').textContent,
                        price: parseFloat(this.dataset.price)
                    };
                    
                    // Enable continue button
                    document.getElementById('continue-step-1').disabled = false;
                    
                    // Track selection
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'service_selection', {
                            'service_name': selectedService.name,
                            'service_price': selectedService.price
                        });
                    }
                });
            });
        }

        // Calendar functionality
        function initializeCalendar() {
            const today = new Date();
            let currentMonth = today.getMonth();
            let currentYear = today.getFullYear();
            
            function generateCalendar(month, year) {
                const monthNames = ["January", "February", "March", "April", "May", "June",
                    "July", "August", "September", "October", "November", "December"];
                
                document.getElementById('calendar-month').textContent = `${monthNames[month]} ${year}`;
                
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const calendarGrid = document.getElementById('calendar-grid');
                
                calendarGrid.innerHTML = '';
                
                // Day headers
                const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                dayHeaders.forEach(day => {
                    const header = document.createElement('div');
                    header.textContent = day;
                    header.style.fontWeight = 'bold';
                    header.style.fontSize = '12px';
                    header.style.color = 'var(--medium-gray)';
                    header.style.textAlign = 'center';
                    header.style.padding = '8px 0';
                    calendarGrid.appendChild(header);
                });
                
                // Empty cells for days before month starts
                for (let i = 0; i < firstDay; i++) {
                    const emptyDay = document.createElement('div');
                    calendarGrid.appendChild(emptyDay);
                }
                
                // Days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    dayElement.textContent = day;
                    
                    const dayDate = new Date(year, month, day);
                    const isToday = dayDate.toDateString() === today.toDateString();
                    const isPast = dayDate < today;
                    
                    if (isPast) {
                        dayElement.classList.add('disabled');
                    } else {
                        dayElement.addEventListener('click', function() {
                            document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
                            this.classList.add('selected');
                            selectedDate = new Date(year, month, day);
                            updateTimeSlots();
                            checkStep2Complete();
                        });
                    }
                    
                    if (isToday) {
                        dayElement.style.border = '2px solid var(--primary-blue)';
                    }
                    
                    calendarGrid.appendChild(dayElement);
                }
            }
            
            window.previousMonth = () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                generateCalendar(currentMonth, currentYear);
            };
            
            window.nextMonth = () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                generateCalendar(currentMonth, currentYear);
            };
            
            generateCalendar(currentMonth, currentYear);
        }

        function updateTimeSlots() {
            const timeSlots = document.querySelectorAll('.time-slot');
            timeSlots.forEach(slot => {
                slot.classList.remove('selected', 'unavailable');
                slot.addEventListener('click', function() {
                    timeSlots.forEach(s => s.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedTime = this.dataset.time;
                    checkStep2Complete();
                });
            });
        }

        function checkStep2Complete() {
            const continueBtn = document.getElementById('continue-step-2');
            continueBtn.disabled = !(selectedDate && selectedTime);
        }

        // Form validation
        function initializeFormValidation() {
            const form = document.getElementById('contact-form');
            const inputs = form.querySelectorAll('input[required], select[required]');
            
            inputs.forEach(input => {
                input.addEventListener('input', validateStep3);
                input.addEventListener('blur', validateStep3);
            });
        }

        function validateStep3() {
            const form = document.getElementById('contact-form');
            const formData = new FormData(form);
            const continueBtn = document.getElementById('continue-step-3');
            
            let isValid = true;
            const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'address', 'city', 'state', 'zip'];
            
            requiredFields.forEach(field => {
                const value = formData.get(field);
                const input = form.querySelector(`[name="${field}"]`);
                
                if (!value || value.trim() === '') {
                    input.closest('.form-group').classList.add('error');
                    isValid = false;
                } else {
                    input.closest('.form-group').classList.remove('error');
                }
            });
            
            // Email validation
            const email = formData.get('email');
            if (email && !isValidEmail(email)) {
                form.querySelector('[name="email"]').closest('.form-group').classList.add('error');
                isValid = false;
            }
            
            continueBtn.disabled = !isValid;
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // Payment methods
        function initializePaymentMethods() {
            const methods = document.querySelectorAll('.payment-method');
            
            methods.forEach(method => {
                method.addEventListener('click', function() {
                    methods.forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                    paymentMethod = this.dataset.method;
                    
                    const cardDetails = document.getElementById('card-details');
                    if (paymentMethod === 'card') {
                        cardDetails.style.display = 'block';
                    } else {
                        cardDetails.style.display = 'none';
                    }
                });
            });

            // Card input formatting
            const cardNumber = document.getElementById('card-number');
            const expiry = document.getElementById('expiry');
            const cvv = document.getElementById('cvv');

            if (cardNumber) {
                cardNumber.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
                    let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                    if (formattedValue.length > 19) formattedValue = formattedValue.substring(0, 19);
                    e.target.value = formattedValue;
                });
            }

            if (expiry) {
                expiry.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length >= 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2, 4);
                    }
                    e.target.value = value;
                });
            }

            if (cvv) {
                cvv.addEventListener('input', function(e) {
                    e.target.value = e.target.value.replace(/\D/g, '').substring(0, 4);
                });
            }
        }

        // Step navigation
        function nextStep() {
            if (currentStep < 5) {
                // Save current step data
                saveStepData();
                
                // Update progress
                updateProgress(currentStep + 1);
                
                // Show next step
                document.querySelector(`.step.active`).classList.remove('active');
                document.getElementById(`step-${currentStep + 1}`).classList.add('active');
                
                currentStep++;
                
                // Update order summary if on payment step
                if (currentStep === 4) {
                    updateOrderSummary();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                updateProgress(currentStep - 1);
                document.querySelector(`.step.active`).classList.remove('active');
                document.getElementById(`step-${currentStep - 1}`).classList.add('active');
                currentStep--;
            }
        }

        function updateProgress(step) {
            const steps = document.querySelectorAll('.progress-step');
            const lines = document.querySelectorAll('.progress-line');
            
            steps.forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index + 1 === step) {
                    stepEl.classList.add('active');
                } else if (index + 1 < step) {
                    stepEl.classList.add('completed');
                }
            });
            
            lines.forEach((line, index) => {
                line.classList.remove('completed');
                if (index + 1 < step) {
                    line.classList.add('completed');
                }
            });
        }

        function saveStepData() {
            switch(currentStep) {
                case 1:
                    bookingData.service = selectedService;
                    break;
                case 2:
                    bookingData.date = selectedDate;
                    bookingData.time = selectedTime;
                    break;
                case 3:
                    const form = document.getElementById('contact-form');
                    const formData = new FormData(form);
                    bookingData.contact = Object.fromEntries(formData.entries());
                    break;
            }
        }

        function updateOrderSummary() {
            const orderItems = document.getElementById('order-items');
            const subtotal = selectedService.price;
            const serviceFee = 25;
            const total = subtotal + serviceFee;
            
            orderItems.innerHTML = `
                <div class="summary-item">
                    <span>${selectedService.name}</span>
                    <span>$${selectedService.price.toFixed(2)}</span>
                </div>
                <div class="summary-item">
                    <span>Service Fee</span>
                    <span>$${serviceFee.toFixed(2)}</span>
                </div>
                <div class="summary-item">
                    <span>Total</span>
                    <span>$${total.toFixed(2)}</span>
                </div>
            `;
        }

        // Payment processing
        function processPayment() {
            const btn = document.getElementById('complete-booking');
            const errorDiv = document.getElementById('payment-error');
            
            btn.classList.add('loading');
            btn.disabled = true;
            btn.textContent = 'Processing...';
            errorDiv.style.display = 'none';
            
            // Simulate payment processing
            setTimeout(() => {
                if (paymentMethod === 'card') {
                    const form = document.getElementById('payment-form');
                    const formData = new FormData(form);
                    
                    // Basic validation
                    if (!formData.get('cardNumber') || !formData.get('expiry') || !formData.get('cvv') || !formData.get('cardName')) {
                        errorDiv.textContent = 'Please fill in all card details.';
                        errorDiv.style.display = 'block';
                        resetPaymentButton();
                        return;
                    }
                }
                
                // Save payment data
                bookingData.payment = {
                    method: paymentMethod,
                    total: selectedService.price + 25
                };
                
                // Generate confirmation
                generateConfirmation();
                
                // Track conversion
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'purchase', {
                        'transaction_id': generateOrderId(),
                        'value': bookingData.payment.total,
                        'currency': 'USD',
                        'items': [{
                            'item_id': selectedService.id,
                            'item_name': selectedService.name,
                            'price': selectedService.price,
                            'quantity': 1
                        }]
                    });
                }
                
                // Go to confirmation
                nextStep();
                
            }, 2000);
        }

        function resetPaymentButton() {
            const btn = document.getElementById('complete-booking');
            btn.classList.remove('loading');
            btn.disabled = false;
            btn.textContent = 'Complete Booking';
        }

        function generateConfirmation() {
            const confirmationDiv = document.getElementById('confirmation-details');
            const orderId = generateOrderId();
            const appointmentDate = selectedDate.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            confirmationDiv.innerHTML = `
                <div class="detail-row">
                    <span>Order ID:</span>
                    <span><strong>${orderId}</strong></span>
                </div>
                <div class="detail-row">
                    <span>Service:</span>
                    <span>${selectedService.name}</span>
                </div>
                <div class="detail-row">
                    <span>Date & Time:</span>
                    <span>${appointmentDate} at ${selectedTime}</span>
                </div>
                <div class="detail-row">
                    <span>Location:</span>
                    <span>${bookingData.contact.address}, ${bookingData.contact.city}, ${bookingData.contact.state}</span>
                </div>
                <div class="detail-row">
                    <span>Total Paid:</span>
                    <span><strong>$${bookingData.payment.total.toFixed(2)}</strong></span>
                </div>
            `;
        }

        function generateOrderId() {
            return 'SD-' + new Date().getFullYear() + '-' + Math.floor(Math.random() * 10000).toString().padStart(4, '0');
        }

        function bookAnother() {
            // Reset booking state
            currentStep = 1;
            selectedService = null;
            selectedDate = null;
            selectedTime = null;
            paymentMethod = 'card';
            bookingData = {};
            
            // Reset UI
            document.querySelectorAll('.service-card').forEach(card => card.classList.remove('selected'));
            document.querySelectorAll('.calendar-day').forEach(day => day.classList.remove('selected'));
            document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
            document.getElementById('contact-form').reset();
            document.getElementById('payment-form').reset();
            
            // Reset progress
            updateProgress(1);
            document.querySelector('.step.active').classList.remove('active');
            document.getElementById('step-1').classList.add('active');
            
            // Disable continue buttons
            document.getElementById('continue-step-1').disabled = true;
            document.getElementById('continue-step-2').disabled = true;
            document.getElementById('continue-step-3').disabled = true;
        }
  </script>
  <main class="main-content">
    <div class="container">
      <!-- Header -->
      <div class="page-header">
        <h1 class="page-title">Book Your Appointment</h1>
        <p class="page-subtitle">
          Schedule mobile IV therapy & wellness with our easy online system. We serve Scottsdale, Paradise Valley, and
          greater Phoenix.
        </p>
      </div>

      <!-- Quick Services -->
      <div class="service-grid" aria-label="Quick services">
        <div class="service-card" data-jump="iv-therapy">
          <div class="service-icon">üíß</div>
          <div class="service-title">IV Therapy</div>
          <div class="service-description">Hydration & vitamin infusions</div>
          <div class="service-price">Starting at $149</div>
          <button class="btn" type="button">Choose IV Therapy</button>
        </div>
        <div class="service-card" data-jump="vitamin-shots">
          <div class="service-icon">üíä</div>
          <div class="service-title">Vitamin Injections</div>
          <div class="service-description">B12, D3, B‚ÄëComplex</div>
          <div class="service-price">Starting at $35</div>
          <button class="btn" type="button">Choose Injections</button>
        </div>
        <div class="service-card" data-jump="nad-peptides">
          <div class="service-icon">üß¨</div>
          <div class="service-title">NAD+ & Peptides</div>
          <div class="service-description">Advanced cellular support</div>
          <div class="service-price">Starting at $399</div>
          <button class="btn" type="button">Choose NAD+/Peptides</button>
        </div>
        <div class="service-card" data-jump="weight-management">
          <div class="service-icon">‚öñÔ∏è</div>
          <div class="service-title">Weight Management</div>
          <div class="service-description">GLP‚Äë1 programs</div>
          <div class="service-price">Starting at $299</div>
          <button class="btn" type="button">Choose Program</button>
        </div>
        <div class="service-card" data-jump="telehealth">
          <div class="service-icon">üíª</div>
          <div class="service-title">Telehealth</div>
          <div class="service-description">Virtual consults</div>
          <div class="service-price">Starting at $75</div>
          <button class="btn" type="button">Choose Telehealth</button>
        </div>
        <div class="service-card" data-jump="mobile-testing">
          <div class="service-icon">üî¨</div>
          <div class="service-title">Mobile Testing</div>
          <div class="service-description">Lab work & screening</div>
          <div class="service-price">Starting at $149</div>
          <button class="btn" type="button">Choose Testing</button>
        </div>
      </div>

      <!-- Service Selector -->
      <section id="service-selector" aria-label="Select your service">
        <div class="section-header">
          <h2 class="section-title">Select Your Service</h2>
          <p style="color:var(--medium-gray);max-width:660px;margin:0 auto">
            Pick a category, then choose a specific option to unlock the booking form & live summary.
          </p>
        </div>

        <div class="service-categories" role="tablist">
          <div class="service-category" data-service="iv-therapy" role="tab" tabindex="0">
            <div class="service-icon">üíß</div>
            <h3>IV Therapy</h3>
            <p>Hydration + vitamins</p>
            <div class="service-price">From $149</div>
          </div>
          <div class="service-category" data-service="nad-peptides" role="tab" tabindex="0">
            <div class="service-icon">üß¨</div>
            <h3>NAD+ & Peptides</h3>
            <p>Cellular support</p>
            <div class="service-price">From $399</div>
          </div>
          <div class="service-category" data-service="vitamin-shots" role="tab" tabindex="0">
            <div class="service-icon">üíâ</div>
            <h3>Vitamin Shots</h3>
            <p>Energy & immune</p>
            <div class="service-price">From $35</div>
          </div>
          <div class="service-category" data-service="weight-management" role="tab" tabindex="0">
            <div class="service-icon">‚öñÔ∏è</div>
            <h3>Weight Mgmt</h3>
            <p>GLP‚Äë1 programs</p>
            <div class="service-price">From $299</div>
          </div>
          <div class="service-category" data-service="telehealth" role="tab" tabindex="0">
            <div class="service-icon">üì±</div>
            <h3>Telehealth</h3>
            <p>Virtual care</p>
            <div class="service-price">From $75</div>
          </div>
          <div class="service-category" data-service="mobile-testing" role="tab" tabindex="0">
            <div class="service-icon">üî¨</div>
            <h3>Mobile Testing</h3>
            <p>At your location</p>
            <div class="service-price">From $149</div>
          </div>
          <div class="service-category" data-service="membership" role="tab" tabindex="0">
            <div class="service-icon">‚≠ê</div>
            <h3>Membership</h3>
            <p>Monthly savings</p>
            <div class="service-price">From $99/mo</div>
          </div>
        </div>

        <!-- Detail Blocks -->
        <div id="iv-therapy-details" class="service-details">
          <h3>IV Therapy Options</h3>
          <div class="service-options">
            <div class="service-option" data-price="149" data-name="Rehydrate IV Drip">
              <div class="option-name">Rehydrate IV Drip</div>
              <div class="option-description">Essential hydration with electrolytes</div>
              <div class="option-price">$149</div>
            </div>
            <div class="service-option" data-price="199" data-name="Jr. Myers' Cocktail">
              <div class="option-name">Jr. Myers' Cocktail</div>
              <div class="option-description">Vitamin & mineral essentials</div>
              <div class="option-price">$199</div>
            </div>
            <div class="service-option" data-price="249" data-name="Myers' Cocktail">
              <div class="option-name">Myers' Cocktail</div>
              <div class="option-description">Comprehensive infusion</div>
              <div class="option-price">$249</div>
            </div>
            <div class="service-option" data-price="299" data-name="Mega Myers'">
              <div class="option-name">Mega Myers'</div>
              <div class="option-description">Enhanced potency</div>
              <div class="option-price">$299</div>
            </div>
            <div class="service-option" data-price="399" data-name="Gold Ultimate Recovery">
              <div class="option-name">Gold Ultimate Recovery</div>
              <div class="option-description">Premium recovery blend</div>
              <div class="option-price">$399</div>
            </div>
            <div class="service-option" data-price="499" data-name="Platinum Premium">
              <div class="option-name">Platinum Premium</div>
              <div class="option-description">Elite wellness formula</div>
              <div class="option-price">$499</div>
            </div>
          </div>
        </div>

        <div id="nad-peptides-details" class="service-details">
          <h3>NAD+ & Peptide Options</h3>
          <div class="service-options">
            <div class="service-option" data-price="399" data-name="Basic NAD+ IV">
              <div class="option-name">Basic NAD+ IV</div>
              <div class="option-description">Intro NAD+ (250mg)</div>
              <div class="option-price">$399</div>
            </div>
            <div class="service-option" data-price="599" data-name="Fountain of Youth NAD+">
              <div class="option-name">Fountain of Youth NAD+</div>
              <div class="option-description">Anti-aging (500mg)</div>
              <div class="option-price">$599</div>
            </div>
            <div class="service-option" data-price="120" data-name="BPC-157 Healing Peptide">
              <div class="option-name">BPC-157 Healing Peptide</div>
              <div class="option-description">Tissue & gut support</div>
              <div class="option-price">$120</div>
            </div>
            <div class="service-option" data-price="180" data-name="Ipamorelin + CJC-1295">
              <div class="option-name">Ipamorelin + CJC-1295</div>
              <div class="option-description">GH optimization</div>
              <div class="option-price">$180</div>
            </div>
          </div>
        </div>

        <div id="vitamin-shots-details" class="service-details">
          <h3>Vitamin Injection Options</h3>
          <div class="service-options">
            <div class="service-option" data-price="35" data-name="B12 Energy Shot">
              <div class="option-name">B12 Energy Shot</div>
              <div class="option-description">1000mcg boost</div>
              <div class="option-price">$35</div>
            </div>
            <div class="service-option" data-price="45" data-name="Vitamin D3 Boost">
              <div class="option-name">Vitamin D3 Boost</div>
              <div class="option-description">50,000 IU immune support</div>
              <div class="option-price">$45</div>
            </div>
            <div class="service-option" data-price="50" data-name="B‚ÄëComplex Shot">
              <div class="option-name">B‚ÄëComplex Shot</div>
              <div class="option-description">Complete B vitamins</div>
              <div class="option-price">$50</div>
            </div>
            <div class="service-option" data-price="120" data-name="B12 Power Pack Bundle">
              <div class="option-name">B12 Power Pack Bundle</div>
              <div class="option-description">4x B12 shots</div>
              <div class="option-price">$120</div>
            </div>
          </div>
        </div>

        <div id="weight-management-details" class="service-details">
          <h3>Weight Management Options</h3>
          <div class="service-options">
            <div class="service-option" data-price="299" data-name="Semaglutide Program">
              <div class="option-name">Semaglutide Program</div>
              <div class="option-description">Weekly GLP‚Äë1 + coaching</div>
              <div class="option-price">$299/month</div>
            </div>
            <div class="service-option" data-price="350" data-name="Tirzepatide Program">
              <div class="option-name">Tirzepatide Program</div>
              <div class="option-description">Dual action weight loss</div>
              <div class="option-price">$350/month</div>
            </div>
            <div class="service-option" data-price="199" data-name="Metabolic Package">
              <div class="option-name">Metabolic Package</div>
              <div class="option-description">Fat‚Äëburning IV + supps</div>
              <div class="option-price">$199</div>
            </div>
          </div>
        </div>

        <div id="telehealth-details" class="service-details">
          <h3>Telehealth Services</h3>
          <div class="service-options">
            <div class="service-option" data-price="150" data-name="Initial Consultation">
              <div class="option-name">Initial Consultation</div>
              <div class="option-description">Comprehensive assessment</div>
              <div class="option-price">$150</div>
            </div>
            <div class="service-option" data-price="75" data-name="Follow‚Äëup Visit">
              <div class="option-name">Follow‚Äëup Visit</div>
              <div class="option-description">Progress review</div>
              <div class="option-price">$75</div>
            </div>
            <div class="service-option" data-price="100" data-name="Prescription Consultation">
              <div class="option-name">Prescription Consultation</div>
              <div class="option-description">Medication review</div>
              <div class="option-price">$100</div>
            </div>
          </div>
        </div>

        <div id="mobile-testing-details" class="service-details">
          <h3>Mobile Testing Options</h3>
          <div class="service-options">
            <div class="service-option" data-price="199" data-name="Basic Wellness Panel">
              <div class="option-name">Basic Wellness Panel</div>
              <div class="option-description">CBC, CMP</div>
              <div class="option-price">$199</div>
            </div>
            <div class="service-option" data-price="299" data-name="Comprehensive Health Screen">
              <div class="option-name">Comprehensive Health Screen</div>
              <div class="option-description">Extended labs incl. hormones</div>
              <div class="option-price">$299</div>
            </div>
            <div class="service-option" data-price="149" data-name="STD Testing">
              <div class="option-name">STD Testing</div>
              <div class="option-description">Discreet & comprehensive</div>
              <div class="option-price">$149</div>
            </div>
          </div>
        </div>

        <div id="membership-details" class="service-details">
          <h3>Membership Plans</h3>
          <div class="service-options">
            <div class="service-option" data-price="99" data-name="Monthly Shot Pass">
              <div class="option-name">Monthly Shot Pass</div>
              <div class="option-description">Unlimited vitamin shots</div>
              <div class="option-price">$99/month</div>
            </div>
            <div class="service-option" data-price="399" data-name="Wellness Explorer">
              <div class="option-name">Wellness Explorer</div>
              <div class="option-description">2 IVs + unlimited shots</div>
              <div class="option-price">$399/month</div>
            </div>
            <div class="service-option" data-price="799" data-name="Wellness Platinum">
              <div class="option-name">Wellness Platinum</div>
              <div class="option-description">Unlimited + priority booking</div>
              <div class="option-price">$799/month</div>
            </div>
          </div>
        </div>

        <!-- Booking Form -->
        <div class="booking-form-section" id="booking-form">
          <h3>Complete Your Booking</h3>
          <form id="appointment-form" novalidate>
            <div class="form-grid">
              <div class="form-group">
                <label for="first-name">First Name *</label>
                <input id="first-name" name="first-name" type="text" required autocomplete="given-name">
              </div>
              <div class="form-group">
                <label for="last-name">Last Name *</label>
                <input id="last-name" name="last-name" type="text" required autocomplete="family-name">
              </div>
              <div class="form-group">
                <label for="phone">Phone Number *</label>
                <input id="phone" name="phone" type="tel" inputmode="tel" required>
              </div>
              <div class="form-group">
                <label for="email">Email Address *</label>
                <input id="email" name="email" type="email" required autocomplete="email">
              </div>
              <div class="form-group">
                <label for="date">Preferred Date *</label>
                <input id="date" name="date" type="date" required>
              </div>
              <div class="form-group">
                <label for="time">Preferred Time *</label>
                <select id="time" name="time" required>
                  <option value="">Select Time</option>
                  <option>8:00 AM</option><option>9:00 AM</option><option>10:00 AM</option>
                  <option>11:00 AM</option><option>12:00 PM</option><option>1:00 PM</option>
                  <option>2:00 PM</option><option>3:00 PM</option><option>4:00 PM</option>
                  <option>5:00 PM</option><option>6:00 PM</option>
                </select>
              </div>
              <div class="form-group" style="grid-column:1/-1">
                <label for="address">Service Address *</label>
                <textarea id="address" name="address" required placeholder="Full address where you'd like the service performed"></textarea>
              </div>
              <div class="form-group" style="grid-column:1/-1">
                <label for="special-requests">Special Requests or Medical History</label>
                <textarea id="special-requests" name="special-requests" placeholder="Allergies, conditions, or special requests"></textarea>
              </div>
            </div>

            <div class="payment-summary" aria-live="polite">
              <h4>Booking Summary</h4>
              <div class="summary-item">
                <span>Selected Service:</span><span id="selected-service-name">No service selected</span></div>
              <div class="summary-item"><span>Service Fee:</span><span id="selected-service-price">$0</span></div>
              <div class="summary-item"><span>Travel Fee:</span><span>$25</span></div>
              <div class="summary-item summary-total"><span>Total:</span><span id="total-price">$25</span></div>
            </div>

            <div class="action-buttons">
              <button type="button" class="btn btn-secondary" id="reset-btn">Start Over</button>
              <button type="submit" class="btn btn-large">Book & Checkout</button>
              <a href="https://Staydripped.intakeq.com/booking" target="_blank" rel="noopener"
                class="btn btn-ghost">Open Full Booking Widget</a>
            </div>
          </form>
        </div>
      </section>

      <!-- Success/Payment Demo Panel -->
      <section class="success-wrap" id="success-wrap" aria-live="polite">
        <div class="payment-container">
          <div class="success-icon" aria-hidden="true">‚úì</div>
          <h2 class="page-title" style="font-size:28px;margin-bottom:6px">Payment Demo</h2>
          <p class="page-subtitle" style="color:var(--medium-gray);max-width:600px;margin:0 auto 12px">
            This is a demo confirmation. Your booking request was captured successfully!
          </p>
          <div class="payment-details" id="payment-details">
            <!-- populated via JS -->
          </div>
          <div class="action-buttons" style="justify-content:center">
            <a href="../index.html" class="btn btn-secondary">Return Home</a>
            <button type="button" class="btn" id="book-another">Book Another</button>
          </div>
        </div>
      </section>

      <!-- Help CTA -->
      <div class="contact-section" aria-label="Need help">
        <h3 style="margin-bottom:6px">Need Help Choosing?</h3>
        <p style="opacity:.95;margin-bottom:14px">Our medical team will help you select the perfect treatment for your
          goals.</p>
        <div class="contact-buttons">
          <a href="tel:+1-602-688-9825" class="contact-btn" aria-label="Call us">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" />
            </svg>
            Call (602) 688‚Äë9825
          </a>
          <a href="mailto:info@staydrippediv.com" class="contact-btn" aria-label="Email us">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
            </svg>
            Email Us
          </a>
          <a href="https://Staydripped.intakeq.com/booking" target="_blank" rel="noopener" class="contact-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M19 3h-1V1h-2v2H8V1H6v2H5C3.9 3 3 3.9 3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
            </svg>
            Direct Booking
          </a>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Stay Dripped IV & Wellness Co.</h3>
          <p>Premium mobile IV therapy and wellness services delivered throughout Scottsdale and nearby areas.</p>
          <p><strong>Phone:</strong> (602) 688‚Äë9825</p>
          <p><strong>Email:</strong> info@staydrippediv.com</p>
        </div>
        <div class="footer-section">
          <h3>Services</h3>
          <ul>
            <li><a href="../pages/book-ivtherapy.html">IV Therapy</a></li>
            <li><a href="../pages/nad-peptides.html">NAD+ & Peptides</a></li>
            <li><a href="../pages/vitamin-injections.html">Vitamin Injections</a></li>
            <li><a href="../pages/weight-management.html">Weight Management</a></li>
            <li><a href="../pages/telehealth-services.html">Telehealth</a></li>
            <li><a href="../pages/mobile-testing-kits.html">Mobile Testing</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Company</h3>
          <ul>
            <li><a href="../pages/first-time-patients.html">New Patients</a></li>
            <li><a href="../pages/membership.html">Membership</a></li>
            <li><a href="../index.html#team">Our Team</a></li>
            <li><a href="../pages/event-corporate-inquiry.html">Events</a></li>
            <li><a href="../pages/compliance.html">Compliance</a></li>
            <li><a href="../pages/privacy-practices.html">Privacy</a></li>
            <li><a href="../pages/terms-of-use.html">Terms</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Service Areas</h3>
          <ul>
            <li>Scottsdale, AZ</li>
            <li>Paradise Valley, AZ</li>
            <li>Phoenix, AZ</li>
            <li>Tempe, AZ</li>
            <li>Fountain Hills, AZ</li>
            <li>Cave Creek, AZ</li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2024 Stay Dripped IV & Wellness Co. All rights reserved.</p>
        <div class="social-links">
          <a href="https://www.instagram.com/officialstaydrippediv/" target="_blank" aria-label="Instagram"
            rel="noopener">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0 3.675a6.162 6.162 0 1 0 0 12.323 6.162 6.162 0 0 0 0-12.323zm7.846-.669a1.44 1.44 0 1 0 0 2.879 1.44 1.44 0 0 0 0-2.879z" />
            </svg>
          </a>
          <a href="https://www.facebook.com/Staydrippediv" target="_blank" aria-label="Facebook" rel="noopener">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M22 12.07C22 6.48 17.52 2 11.93 2S1.86 6.48 1.86 12.07c0 4.99 3.65 9.13 8.43 9.93v-7.02H7.9V12.1h2.39V9.93c0-2.36 1.4-3.66 3.55-3.66 1.03 0 2.11.18 2.11.18v2.32h-1.19c-1.17 0-1.53.73-1.53 1.48v1.85h2.6l-.42 2.88h-2.18V22c4.78-.8 8.43-4.94 8.43-9.93z" />
            </svg>
          </a>
          <a href="https://www.linkedin.com/jobs/view/infusion-nurse-at-stay-dripped-mobile-iv-llc-az-4240254046"
            target="_blank" aria-label="LinkedIn" rel="noopener">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM.5 8.5h4V23h-4V8.5zM8.5 8.5h3.82v1.98h.05c.53-1 1.83-2.05 3.77-2.05 4.03 0 4.77 2.65 4.77 6.1V23h-4v-6.6c0-1.58-.03-3.61-2.2-3.61-2.2 0-2.53 1.72-2.53 3.49V23h-4V8.5z" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // NAV & SHARED JS LOADER
    async function loadNavigation(){
      try{
        const res = await fetch('../shared/navigation.html',{cache:'no-cache'});
        if(res.ok){
          const html = await res.text();
          document.getElementById('navigation-placeholder').innerHTML = html;
          const script = document.createElement('script');
          script.src = '../shared/navigation.js'; script.defer = true;
          document.head.appendChild(script);
        }
      }catch(e){ console.warn('Navigation not loaded:', e); }
    }

    // FAQ & Reviews (safe stubs)
    function initializeFAQ(){
      document.querySelectorAll('.faq-question')?.forEach(btn=>{
        btn.addEventListener('click',()=>{
          const ans = btn.parentElement.querySelector('.faq-answer');
          const tog = btn.querySelector('.faq-toggle');
          const open = ans && ans.style.display === 'block';
          if(ans){ ans.style.display = open ? 'none' : 'block'; }
          if(tog){ tog.textContent = open ? '‚Üì' : '‚Üë'; }
        });
      });
    }
    function initializeReviewsCarousel(){
      const prev = document.getElementById('prevReview');
      const next = document.getElementById('nextReview');
      if(prev) prev.addEventListener('click',()=>{ /* attach when reviews exist */ });
      if(next) next.addEventListener('click',()=>{ /* attach when reviews exist */ });
    }
    function performSearch(){
      const input = document.getElementById('topbar-search');
      if(!input) return; const q = input.value.trim(); if(!q) return;
      window.location.href = `../search.html?q=${encodeURIComponent(q)}`;
    }

    // BOOKING/SELECTION LOGIC
    let selectedServiceName = null;
    let selectedServicePrice = 0;
    const TRAVEL_FEE = 25;

    const money = n => `$${Number(n).toFixed(0)}`;

    function updateSummary(){
      document.getElementById('selected-service-name').textContent = selectedServiceName || 'No service selected';
      document.getElementById('selected-service-price').textContent = money(selectedServicePrice || 0);
      document.getElementById('total-price').textContent = money((selectedServicePrice || 0) + TRAVEL_FEE);
    }

    function showCategory(key){
      document.querySelectorAll('.service-category').forEach(c=>c.classList.toggle('active', c.dataset.service===key));
      document.querySelectorAll('.service-details').forEach(d=>d.classList.toggle('active', d.id === `${key}-details`));
      document.getElementById('booking-form').classList.remove('active');
      document.querySelectorAll('.service-option').forEach(o=>o.classList.remove('selected'));
      selectedServiceName = null; selectedServicePrice = 0; updateSummary();
    }

    function attachServiceHandlers(){
      // Category chips
      document.querySelectorAll('.service-category').forEach(tile=>{
        const key = tile.dataset.service;
        const open = ()=>showCategory(key);
        tile.addEventListener('click', open);
        tile.addEventListener('keypress', e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); open(); }});
      });
      // Quick cards jump
      document.querySelectorAll('.service-card[data-jump]').forEach(card=>{
        const key = card.getAttribute('data-jump');
        card.querySelector('.btn')?.addEventListener('click', ()=>{
          document.getElementById('service-selector').scrollIntoView({behavior:'smooth'});
          showCategory(key);
        });
      });
      // Option select
      document.querySelectorAll('.service-details').forEach(block=>{
        block.addEventListener('click', e=>{
          const opt = e.target.closest('.service-option'); if(!opt) return;
          block.querySelectorAll('.service-option').forEach(o=>o.classList.remove('selected'));
          opt.classList.add('selected');
          selectedServiceName = opt.dataset.name || 'Selected Service';
          selectedServicePrice = Number(opt.dataset.price || 0);
          updateSummary();
          document.getElementById('booking-form').classList.add('active');
          document.getElementById('appointment-form').scrollIntoView({behavior:'smooth'});
        });
      });
    }

    // CHECKOUT / SUCCESS DEMO
    // Escape HTML meta-characters to prevent XSS
    function escapeHTML(str) {
      return String(str)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;')
        .replace(/\//g, '&#x2F;');
    }

    function buildSuccessDetails(overrides){
      // Supports URL param overrides for backwards compatibility
      const params = new URLSearchParams(location.search);
      let totalParam = Number(params.get('total'));
      let addonsParam = Number(params.get('addons'));
      if(isNaN(totalParam)) totalParam = null;
      if(isNaN(addonsParam)) addonsParam = 0;

      const name = overrides?.name || selectedServiceName || 'IV Drip Therapy';
      const price = overrides?.price ?? selectedServicePrice || 199;
      const travel = TRAVEL_FEE;
      const total = overrides?.total ?? (totalParam ?? (price + travel));
      const addons = addonsParam > 0 ? addonsParam : (overrides?.addons ?? 0);

      const html = `
        <div class="detail-row"><span>Treatment Selected:</span><span>${escapeHTML(name)}</span></div>
        ${addons ? `<div class="detail-row"><span>Add‚Äëons Selected:</span><span>${addons} enhancement${addons!==1?'s':''}</span></div>` : ''}
        <div class="detail-row"><span>Service Fee:</span><span>${money(price)}</span></div>
        <div class="detail-row"><span>Travel Fee:</span><span>${money(travel)}</span></div>
        <div class="detail-row total-row"><span>Total Amount:</span><span style="color:var(--primary-blue)">${money(total)}</span></div>
      `;
      document.getElementById('payment-details').innerHTML = html;
    }

    function showSuccess(){
      document.getElementById('success-wrap').classList.add('active');
      document.querySelector('.main-content .container').scrollIntoView({behavior:'smooth',block:'start'});
      buildSuccessDetails();
    }

    function resetForm(){
      // Remove success view
      document.getElementById('success-wrap').classList.remove('active');
      // Reset selections
      document.querySelectorAll('.service-category').forEach(c=>c.classList.remove('active'));
      document.querySelectorAll('.service-details').forEach(d=>d.classList.remove('active'));
      document.querySelectorAll('.service-option').forEach(o=>o.classList.remove('selected'));
      selectedServiceName = null; selectedServicePrice = 0; updateSummary();
      // Reset form
      document.getElementById('booking-form').classList.remove('active');
      document.getElementById('appointment-form').reset();
      window.scrollTo({top:0,behavior:'smooth'});
    }

    // INIT
    document.addEventListener('DOMContentLoaded', ()=>{
      loadNavigation();
      initializeFAQ();
      initializeReviewsCarousel();
      attachServiceHandlers();
      updateSummary();

      // If page is opened with ?total or #success, show success panel (backwards compat)
      if(location.hash === '#success' || new URLSearchParams(location.search).has('total')){
        document.getElementById('success-wrap').classList.add('active');
        buildSuccessDetails();
      }

      // Submit handler
      const form = document.getElementById('appointment-form');
      form.addEventListener('submit', e=>{
        e.preventDefault();
        if(!selectedServiceName){
          alert('Please select a service option first.');
          return;
        }
        // Minimal client-side check
        const required = ['first-name','last-name','phone','email','date','time','address'];
        for(const id of required){
          const el = document.getElementById(id);
          if(!el || !el.value.trim()){
            el?.focus();
            alert('Please complete all required fields.');
            return;
          }
        }
        showSuccess();
        gtag('event','purchase', {
          currency: 'USD',
          value: (selectedServicePrice||0) + TRAVEL_FEE,
          items: [{item_name:selectedServiceName, price:selectedServicePrice||0}]
        });
      });

      // Reset
      document.getElementById('reset-btn').addEventListener('click', resetForm);
      document.getElementById('book-another').addEventListener('click', resetForm);

      // Topbar search shortcut (if present in loaded nav)
      const topbarSearch = document.getElementById('topbar-search');
      if(topbarSearch){
        topbarSearch.addEventListener('keypress', e=>{ if(e.key==='Enter') performSearch(); });
        document.addEventListener('keydown', e=>{
          if((e.metaKey || e.ctrlKey) && e.key.toLowerCase()==='k'){ e.preventDefault(); topbarSearch.focus(); }
        });
      }
    });
  </script>
</body>

</html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-44WEBDZB6F"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-44WEBDZB6F');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Enhanced Booking System | Stay Dripped IV & Wellness Co.</title>
  <meta name="description"
    content="Complete booking system for mobile IV therapy, NAD+, peptides, vitamin injections, weight management, telehealth, and mobile testing services in Scottsdale, AZ.">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">

  <!-- Shared Navigation CSS -->
  <link rel="stylesheet" href="../shared/navigation.css">

  <style>
    :root {
      --primary-blue: #0066CC;
      --secondary-teal: #00B8A0;
      --accent-orange: #FF6B35;
      --warm-beige: #F5F1EB;
      --soft-green: #8BC34A;
      --dark-slate: #1A2B3A;
      --light-gray: #F8FAFC;
      --warm-gray: #F7F5F3;
      --medium-gray: #64748B;
      --warm-text: #2D3748;
      --white: #FFFFFF;
      --border-color: #E2E8F0;
      --soft-border: #F0EDE8;
      --font-family: 'Inter', sans-serif;
      --max-width: 1200px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-family);
      font-size: 16px;
      line-height: 1.6;
      color: var(--dark-slate);
      background: var(--light-gray);
      padding-top: 132px;
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 20px;
    }

    .checkout-container {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 40px;
      padding: 40px 0;
    }

    .checkout-main {
      background: var(--white);
      border-radius: 16px;
      padding: 40px;
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
    }

    .checkout-sidebar {
      background: var(--white);
      border-radius: 16px;
      padding: 32px;
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
      height: fit-content;
      position: sticky;
      top: 160px;
    }

    .page-title {
      font-size: 32px;
      font-weight: 700;
      color: var(--dark-slate);
      margin-bottom: 8px;
    }

    .page-subtitle {
      color: var(--medium-gray);
      margin-bottom: 40px;
    }

    .section-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 24px;
      padding-bottom: 12px;
      border-bottom: 2px solid var(--border-color);
    }

    .form-section {
      margin-bottom: 40px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--dark-slate);
      font-size: 14px;
    }

    .form-group input,
    .form-group select {
      padding: 12px 16px;
      border: 2px solid var(--border-color);
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
      background: var(--white);
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
    }

    .required {
      color: var(--accent-orange);
    }

    /* Cart Summary */
    .cart-summary h3 {
      font-size: 20px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 20px;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 16px 0;
      border-bottom: 1px solid var(--border-color);
    }

    .cart-item:last-child {
      border-bottom: none;
    }

    .item-info h4 {
      font-size: 16px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 4px;
    }

    .item-details {
      font-size: 14px;
      color: var(--medium-gray);
    }

    .item-price {
      font-size: 16px;
      font-weight: 600;
      color: var(--dark-slate);
      text-align: right;
    }

    .price-breakdown {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid var(--border-color);
    }

    .price-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .price-row.total {
      font-size: 18px;
      font-weight: 700;
      color: var(--primary-blue);
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--border-color);
    }

    .btn {
      background: var(--primary-blue);
      color: var(--white);
      padding: 16px 32px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 16px;
      width: 100%;
      margin-top: 24px;
    }

    .btn:hover {
      background: #0052A3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
    }

    .btn:disabled {
      background: var(--medium-gray);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary-blue);
      border: 2px solid var(--primary-blue);
      margin-top: 12px;
    }

    .btn-secondary:hover {
      background: var(--primary-blue);
      color: var(--white);
    }

    .payment-methods {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
    }

    .payment-method {
      border: 2px solid var(--border-color);
      border-radius: 8px;
      padding: 16px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--white);
    }

    .payment-method:hover,
    .payment-method.selected {
      border-color: var(--primary-blue);
      background: rgba(0, 102, 204, 0.05);
    }

    .payment-method img {
      height: 24px;
      margin-bottom: 8px;
    }

    .payment-method span {
      font-size: 12px;
      font-weight: 600;
      color: var(--dark-slate);
    }

    .security-notice {
      background: var(--light-gray);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 16px;
      margin-top: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .security-icon {
      color: var(--soft-green);
      font-size: 20px;
    }

    .security-text {
      font-size: 14px;
      color: var(--medium-gray);
    }

    .empty-cart {
      text-align: center;
      padding: 60px 20px;
    }

    .empty-cart img {
      width: 120px;
      height: 120px;
      opacity: 0.5;
      margin-bottom: 24px;
    }

    .empty-cart h3 {
      font-size: 24px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 12px;
    }

    .empty-cart p {
      color: var(--medium-gray);
      margin-bottom: 32px;
    }

    .progress-indicator {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 16px;
      margin-bottom: 40px;
    }

    .progress-step {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--medium-gray);
      font-size: 14px;
      font-weight: 500;
    }

    .progress-step.active {
      color: var(--primary-blue);
    }

    .progress-step.completed {
      color: var(--soft-green);
    }

    .step-number {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--border-color);
      color: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
    }

    .progress-step.active .step-number {
      background: var(--primary-blue);
    }

    .progress-step.completed .step-number {
      background: var(--soft-green);
    }

    @media (max-width: 968px) {
      .checkout-container {
        grid-template-columns: 1fr;
        gap: 24px;
      }

      .checkout-sidebar {
        order: -1;
        position: static;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .payment-methods {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {

      .checkout-main,
      .checkout-sidebar {
        padding: 24px;
      }

      .page-title {
        font-size: 24px;
      }

      .payment-methods {
        grid-template-columns: 1fr;
      }
    }

    /* Loading state */
    .loading {
      position: relative;
      pointer-events: none;
    }

    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin-left: -10px;
      margin-top: -10px;
      border: 2px solid transparent;
      border-top: 2px solid var(--white);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .error-message {
      background: #fee;
      border: 1px solid #fcc;
      color: #c33;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 14px;
      margin-top: 12px;
      display: none;
    }

    .success-message {
      background: #efe;
      border: 1px solid #cfc;
      color: #3c3;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 14px;
      margin-top: 12px;
      display: none;
    }

    :root {
      --primary-blue: #0066CC;
      --secondary-teal: #00B8A0;
      --accent-orange: #FF6B35;
      --warm-beige: #F5F1EB;
      --soft-green: #10B981;
      --dark-slate: #1A2B3A;
      --light-gray: #F8FAFC;
      --warm-gray: #F7F5F3;
      --medium-gray: #64748B;
      --warm-text: #2D3748;
      --white: #FFFFFF;
      --border-color: #E2E8F0;
      --soft-border: #F0EDE8;
      --error-red: #EF4444;
      --font-family: 'Inter', sans-serif;
      --max-width: 1200px;
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.08);
      --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-family);
      font-size: 16px;
      line-height: 1.6;
      color: var(--dark-slate);
      background: var(--light-gray);
      padding-top: 120px;
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Progress Bar */
    .booking-progress {
      background: var(--white);
      padding: 24px 0;
      margin-bottom: 24px;
      border-radius: 16px;
      box-shadow: var(--shadow-md);
    }

    .progress-steps {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 16px;
      max-width: 800px;
      margin: 0 auto;
    }

    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      position: relative;
    }

    .step-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--border-color);
      color: var(--medium-gray);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .progress-step.active .step-circle {
      background: var(--primary-blue);
      color: var(--white);
      transform: scale(1.1);
    }

    .progress-step.completed .step-circle {
      background: var(--soft-green);
      color: var(--white);
    }

    .step-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--medium-gray);
      text-align: center;
    }

    .progress-step.active .step-label {
      color: var(--primary-blue);
    }

    .progress-connector {
      height: 2px;
      width: 48px;
      background: var(--border-color);
      transition: background 0.3s ease;
    }

    .progress-connector.completed {
      background: var(--soft-green);
    }

    /* Main Content */
    .booking-main {
      background: var(--white);
      border-radius: 20px;
      padding: 40px;
      box-shadow: var(--shadow-lg);
      margin-bottom: 24px;
      min-height: 600px;
    }

    .step-container {
      display: none;
      animation: fadeIn 0.4s ease-in-out;
    }

    .step-container.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .step-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .step-title {
      font-size: 32px;
      font-weight: 800;
      color: var(--dark-slate);
      margin-bottom: 12px;
    }

    .step-subtitle {
      font-size: 18px;
      color: var(--medium-gray);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Service Categories */
    .service-categories {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .service-category {
      background: var(--white);
      border: 2px solid var(--border-color);
      border-radius: 16px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .service-category::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-blue), var(--secondary-teal));
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    .service-category:hover {
      border-color: var(--primary-blue);
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .service-category:hover::before {
      transform: scaleX(1);
    }

    .service-category.selected {
      border-color: var(--primary-blue);
      background: rgba(0, 102, 204, 0.05);
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .service-category.selected::before {
      transform: scaleX(1);
    }

    .service-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 16px;
      background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal));
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: var(--white);
      transition: transform 0.3s ease;
    }

    .service-category:hover .service-icon {
      transform: scale(1.1);
    }

    .service-name {
      font-size: 20px;
      font-weight: 700;
      color: var(--dark-slate);
      margin-bottom: 8px;
    }

    .service-description {
      font-size: 14px;
      color: var(--medium-gray);
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .service-price {
      font-size: 18px;
      font-weight: 700;
      color: var(--primary-blue);
    }

    .selection-indicator {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 28px;
      height: 28px;
      background: var(--soft-green);
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      color: var(--white);
      font-size: 14px;
      font-weight: 700;
    }

    .service-category.selected .selection-indicator {
      display: flex;
    }

    /* Complete Service Dropdown */
    .complete-service-selector {
      background: var(--light-gray);
      border-radius: 16px;
      padding: 32px;
      margin-bottom: 32px;
      text-align: center;
    }

    .dropdown-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--dark-slate);
      margin-bottom: 8px;
    }

    .dropdown-subtitle {
      font-size: 16px;
      color: var(--medium-gray);
      margin-bottom: 24px;
    }

    .service-dropdown {
      position: relative;
      max-width: 500px;
      margin: 0 auto 20px;
    }

    .service-select {
      width: 100%;
      padding: 16px 20px;
      border: 2px solid var(--border-color);
      border-radius: 12px;
      font-size: 16px;
      font-weight: 500;
      background: var(--white);
      cursor: pointer;
      transition: all 0.3s ease;
      appearance: none;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 12px center;
      background-repeat: no-repeat;
      background-size: 16px;
      padding-right: 48px;
    }

    .service-select:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
    }

    .service-select option {
      padding: 12px;
      font-weight: 500;
    }

    .service-select optgroup {
      font-weight: 700;
      color: var(--dark-slate);
    }

    .dropdown-cart-action {
      margin-top: 16px;
    }

    .selected-service-info {
      display: none;
      background: var(--white);
      border: 2px solid var(--primary-blue);
      border-radius: 12px;
      padding: 20px;
      margin: 16px auto;
      max-width: 500px;
      text-align: left;
    }

    .selected-service-info.show {
      display: block;
    }

    .selected-service-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--dark-slate);
      margin-bottom: 8px;
    }

    .selected-service-description {
      font-size: 14px;
      color: var(--medium-gray);
      margin-bottom: 12px;
    }

    .selected-service-price {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary-blue);
    }

    /* Service Options */
    .service-options {
      display: none;
      margin-top: 24px;
    }

    .service-options.active {
      display: block;
    }

    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .option-card {
      background: var(--white);
      border: 2px solid var(--border-color);
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .option-card:hover {
      border-color: var(--primary-blue);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .option-card.selected {
      border-color: var(--primary-blue);
      background: rgba(0, 102, 204, 0.05);
    }

    .option-name {
      font-size: 16px;
      font-weight: 700;
      color: var(--dark-slate);
      margin-bottom: 6px;
    }

    .option-description {
      font-size: 13px;
      color: var(--medium-gray);
      margin-bottom: 8px;
      line-height: 1.4;
    }

    .option-price {
      font-size: 16px;
      font-weight: 700;
      color: var(--primary-blue);
    }

    /* IntakeQ Integration */
    .intakeq-section {
      background: var(--light-gray);
      border-radius: 16px;
      padding: 32px;
      margin: 32px 0;
      text-align: center;
    }

    .intakeq-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--dark-slate);
      margin-bottom: 16px;
    }

    .intakeq-subtitle {
      font-size: 16px;
      color: var(--medium-gray);
      margin-bottom: 24px;
    }

    #intakeq {
      min-height: 400px;
      border-radius: 12px;
      overflow: hidden;
      background: var(--white);
      border: 1px solid var(--border-color);
    }

    /* Cart Integration */
    .cart-actions {
      display: flex;
      gap: 16px;
      justify-content: center;
      margin-top: 24px;
      flex-wrap: wrap;
    }

    /* Buttons */
    .btn {
      background: var(--primary-blue);
      color: var(--white);
      padding: 14px 28px;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 16px;
      min-width: 160px;
    }

    .btn:hover {
      background: #0052A3;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 102, 204, 0.3);
    }

    .btn:disabled {
      background: var(--medium-gray);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      opacity: 0.6;
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary-blue);
      border: 2px solid var(--primary-blue);
    }

    .btn-secondary:hover {
      background: var(--primary-blue);
      color: var(--white);
    }

    .btn-success {
      background: var(--soft-green);
    }

    .btn-success:hover {
      background: #059669;
    }

    .btn-large {
      padding: 18px 36px;
      font-size: 18px;
      min-width: 200px;
    }

    .btn-full {
      width: 100%;
    }

    /* Contact Section */
    .contact-section {
      background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal));
      color: var(--white);
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      margin-top: 32px;
    }

    .contact-section h3 {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 16px;
    }

    .contact-section p {
      font-size: 18px;
      margin-bottom: 24px;
      opacity: 0.95;
    }

    .contact-buttons {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .contact-btn {
      background: var(--white);
      color: var(--primary-blue);
      padding: 14px 28px;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      text-decoration: none;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .contact-btn:hover {
      background: var(--light-gray);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 255, 255, 0.3);
    }

    /* Loading States */
    .loading {
      position: relative;
      overflow: hidden;
    }

    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
      border: 2px solid transparent;
      border-top: 2px solid var(--white);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Error States */
    .error-message {
      background: #FEE2E2;
      border: 1px solid #FECACA;
      color: var(--error-red);
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      display: none;
      align-items: center;
      gap: 8px;
    }

    .error-message.show {
      display: flex;
    }

    /* Success Messages */
    .success-message {
      background: #D1FAE5;
      border: 1px solid #A7F3D0;
      color: #059669;
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      display: none;
      align-items: center;
      gap: 8px;
    }

    .success-message.show {
      display: flex;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding-top: 100px;
      }

      .booking-main {
        padding: 24px;
        border-radius: 16px;
      }

      .step-title {
        font-size: 24px;
      }

      .step-subtitle {
        font-size: 16px;
      }

      .service-categories {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .options-grid {
        grid-template-columns: 1fr;
      }

      .progress-steps {
        gap: 8px;
      }

      .progress-connector {
        width: 24px;
      }

      .step-label {
        font-size: 10px;
      }

      .contact-buttons {
        flex-direction: column;
        align-items: center;
      }

      .contact-btn {
        width: 100%;
        max-width: 280px;
        justify-content: center;
      }

      .cart-actions {
        flex-direction: column;
        align-items: center;
      }

      .btn {
        width: 100%;
        max-width: 280px;
      }

      .complete-service-selector {
        padding: 20px;
      }

      .dropdown-title {
        font-size: 20px;
      }

      .dropdown-subtitle {
        font-size: 14px;
      }

      .service-select {
        font-size: 14px;
        padding: 14px 16px;
        padding-right: 40px;
      }

      .selected-service-info {
        padding: 16px;
      }

      .selected-service-name {
        font-size: 16px;
      }
    }

    /* Hide/Show Utility Classes */
    .hidden {
      display: none !important;
    }

    .visible {
      display: block !important;
    }

    /* Animation Classes */
    .fade-in {
      animation: fadeIn 0.4s ease-in-out;
    }

    .slide-in {
      animation: slideIn 0.4s ease-in-out;
    }

    @keyframes slideIn {
      from {
        transform: translateX(-20px);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    <style> :root {
      --primary-blue: #0066CC;
      --secondary-teal: #00B8A0;
      --accent-orange: #FF6B35;
      --warm-beige: #F5F1EB;
      --soft-green: #8BC34A;
      --dark-slate: #1A2B3A;
      --light-gray: #F8FAFC;
      --warm-gray: #F7F5F3;
      --medium-gray: #64748B;
      --warm-text: #2D3748;
      --white: #FFFFFF;
      --border-color: #E2E8F0;
      --soft-border: #F0EDE8;
      --font-family: 'Inter', sans-serif;
      --max-width: 800px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-family);
      font-size: 16px;
      line-height: 1.6;
      color: var(--dark-slate);
      background: var(--light-gray);
      padding-top: 132px;
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 40px 20px;
    }

    .confirmation-card {
      background: var(--white);
      border-radius: 16px;
      padding: 48px;
      text-align: center;
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
    }

    .success-icon {
      width: 80px;
      height: 80px;
      background: var(--soft-green);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 32px;
      color: var(--white);
      font-size: 36px;
    }

    .confirmation-title {
      font-size: 32px;
      font-weight: 700;
      color: var(--dark-slate);
      margin-bottom: 16px;
    }

    .confirmation-subtitle {
      font-size: 18px;
      color: var(--medium-gray);
      margin-bottom: 32px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .order-details {
      background: var(--light-gray);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 32px;
      text-align: left;
    }

    .order-number {
      font-size: 24px;
      font-weight: 600;
      color: var(--primary-blue);
      margin-bottom: 24px;
      text-align: center;
    }

    .details-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 24px;
      margin-bottom: 24px;
    }

    .detail-item {
      text-align: center;
    }

    .detail-label {
      font-size: 14px;
      color: var(--medium-gray);
      margin-bottom: 4px;
      font-weight: 500;
    }

    .detail-value {
      font-size: 16px;
      font-weight: 600;
      color: var(--dark-slate);
    }

    .next-steps {
      background: rgba(0, 102, 204, 0.05);
      border: 1px solid rgba(0, 102, 204, 0.2);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 32px;
    }

    .next-steps h3 {
      font-size: 20px;
      font-weight: 600;
      color: var(--primary-blue);
      margin-bottom: 16px;
      text-align: center;
    }

    .steps-list {
      list-style: none;
      max-width: 400px;
      margin: 0 auto;
    }

    .steps-list li {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 12px;
      text-align: left;
    }

    .step-number {
      width: 24px;
      height: 24px;
      background: var(--primary-blue);
      color: var(--white);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-text {
      color: var(--dark-slate);
      line-height: 1.5;
    }

    .action-buttons {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      background: var(--primary-blue);
      color: var(--white);
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 14px;
    }

    .btn:hover {
      background: #0052A3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary-blue);
      border: 2px solid var(--primary-blue);
    }

    .btn-secondary:hover {
      background: var(--primary-blue);
      color: var(--white);
    }

    .contact-info {
      background: var(--warm-beige);
      border-radius: 12px;
      padding: 24px;
      margin-top: 32px;
    }

    .contact-info h4 {
      font-size: 18px;
      font-weight: 600;
      color: var(--dark-slate);
      margin-bottom: 16px;
      text-align: center;
    }

    .contact-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      text-align: center;
    }

    .contact-item {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 14px;
      color: var(--medium-gray);
    }

    .contact-item strong {
      color: var(--dark-slate);
    }

    @media (max-width: 768px) {
      .confirmation-card {
        padding: 32px 24px;
      }

      .confirmation-title {
        font-size: 24px;
      }

      .confirmation-subtitle {
        font-size: 16px;
      }

      .action-buttons {
        flex-direction: column;
      }

      .btn {
        width: 100%;
      }
    }

    /* Celebration animation */
    @keyframes celebrate {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.05);
      }

      100% {
        transform: scale(1);
      }
    }

    .success-icon {
      animation: celebrate 0.6s ease-out;
    }

    .floating-particles {
      position: relative;
      overflow: hidden;
    }

    .floating-particles::before {
      content: 'üéâ';
      position: absolute;
      top: -20px;
      left: 10%;
      font-size: 24px;
      animation: float 3s ease-in-out infinite;
      animation-delay: 0s;
    }

    .floating-particles::after {
      content: '‚ú®';
      position: absolute;
      top: -20px;
      right: 10%;
      font-size: 20px;
      animation: float 3s ease-in-out infinite;
      animation-delay: 1.5s;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0) rotate(0deg);
        opacity: 0;
      }

      50% {
        transform: translateY(-30px) rotate(180deg);
        opacity: 1;
      }
    }
  </style>
</head>

<body>
  <!-- Navigation Placeholder -->
  <div id="navigation-placeholder"></div>

  <main class="container">
    <!-- Progress Indicator -->
    <div class="booking-progress">
      <div class="progress-steps">
        <div class="progress-step active" data-step="1">
          <div class="step-circle">1</div>
          <div class="step-label">Choose Service</div>
        </div>
        <div class="progress-connector"></div>
        <div class="progress-step" data-step="2">
          <div class="step-circle">2</div>
          <div class="step-label">Book Appointment</div>
        </div>
        <div class="progress-connector"></div>
        <div class="progress-step" data-step="3">
          <div class="step-circle">3</div>
          <div class="step-label">Confirmation</div>
        </div>
      </div>
    </div>

    <!-- Main Booking Interface -->
    <div class="booking-main">
      <!-- Error/Success Messages -->
      <div class="error-message" id="error-message">
        <span>‚ö†Ô∏è</span>
        <span id="error-text"></span>
      </div>

      <div class="success-message" id="success-message">
        <span>‚úÖ</span>
        <span id="success-text"></span>
      </div>

      <!-- Step 1: Service Selection -->
      <div class="step-container active" id="step-1">
        <div class="step-header">
          <h1 class="step-title">Choose Your Wellness Service</h1>
          <p class="step-subtitle">Select from our comprehensive range of mobile wellness treatments delivered directly
            to your location in Scottsdale and surrounding areas.</p>
        </div>

        <!-- Complete Service Dropdown -->
        <div class="complete-service-selector">
          <h2 class="dropdown-title">Quick Service Selection</h2>
          <p class="dropdown-subtitle">Select any service directly and add to cart, or browse categories below</p>

          <div class="service-dropdown">
            <select class="service-select" id="complete-service-dropdown">
                            <option value="">Select a service...</option>

                            <!-- BASIC IV THERAPY -->
                            <optgroup label="üíß Basic IV Therapy">
                                <option value="iv-therapy|rehydrate|Rehydrate IV Drip|125|Basic hydration therapy with essential electrolytes">Rehydrate IV Drip - $125</option>
                                <option value="iv-therapy|rehydrate-plus|Rehydrate Plus IV Drip|150|Enhanced hydration with vitamins/minerals">Rehydrate Plus IV Drip - $150</option>
                            </optgroup>

                            <!-- STANDARD IV THERAPY -->
                            <optgroup label="üíß Standard IV Therapy">
                                <option value="iv-therapy|jr-myers|Jr. Myers' Cocktail IV Drip|175|Foundational nutrient blend for general wellness">Jr. Myers' Cocktail IV Drip - $175</option>
                                <option value="iv-therapy|myers|Myers' Cocktail IV Drip|200|Classic Myers' formula for comprehensive wellness">Myers' Cocktail IV Drip - $200</option>
                                <option value="iv-therapy|mega-myers|Mega Myers' Cocktail IV Drip|250|Maximum strength Myers' formula">Mega Myers' Cocktail IV Drip - $250</option>
                                <option value="iv-therapy|hangover|The Day After Hangover Relief IV Drip|175|Rapid hangover recovery with anti-nausea">The Day After Hangover Relief IV Drip - $175</option>
                            </optgroup>

                            <!-- SPECIALTY IV THERAPY -->
                            <optgroup label="üíß Specialty IV Therapy">
                                <option value="iv-therapy|sun-devil|The Sun Devil Energy Booster IV Drip|225|High-energy formula for performance">The "Sun Devil" Energy Booster IV Drip - $225</option>
                                <option value="iv-therapy|d-book|The D-Book Performance Booster IV Drip|275|Elite athletic performance blend">The "D-Book" Performance Booster IV Drip - $275</option>
                                <option value="iv-therapy|diamond-back|The Diamond-Back Immune Booster IV Drip|200|Immune support with high-dose vitamins">The "Diamond-Back" Immune Booster IV Drip - $200</option>
                                <option value="iv-therapy|scottsdale|The Scottsdale Beauty IV Bag|250|Beauty/anti-aging with glutathione and biotin">The "Scottsdale" Beauty IV Bag - $250</option>
                                <option value="iv-therapy|stress-relief|The Stress Relief IV Drip|200|Calming formula for stress reduction">The Stress Relief IV Drip - $200</option>
                                <option value="iv-therapy|mental-clarity|The Mental Clarity IV Drip|225|Cognitive enhancement with nootropic nutrients">The Mental Clarity IV Drip - $225</option>
                                <option value="iv-therapy|anti-inflammatory|The Anti-Inflammatory IV Drip|275|Anti-inflammatory formula with curcumin">The Anti-Inflammatory IV Drip - $275</option>
                                <option value="iv-therapy|stay-dripped|The Stay Dripped Special IV Drip|325|Signature comprehensive vitamin formula">The Stay Dripped Special IV Drip - $325</option>
                            </optgroup>

                            <!-- PREMIUM IV THERAPY -->
                            <optgroup label="üíß Premium IV Therapy">
                                <option value="iv-therapy|gold|The Gold Ultimate Hydration & Recovery IV Drip|300|Premium hydration and recovery formula">The "Gold" Ultimate Hydration & Recovery IV Drip - $300</option>
                                <option value="iv-therapy|platinum|The Platinum Ultimate Hydration & Recovery IV Drip|350|Elite hydration and recovery treatment">The "Platinum" Ultimate Hydration & Recovery IV Drip - $350</option>
                                <option value="iv-therapy|arizona|The Arizona Detox & Cleanse IV Drip|275|Complete detox and cleanse formula">The "Arizona" Detox & Cleanse IV Drip - $275</option>
                                <option value="iv-therapy|metabolism|Metabolism Booster IV Drip|225|Metabolic enhancement for weight management">Metabolism Booster IV Drip - $225</option>
                            </optgroup>

                            <!-- NAD+ IV THERAPY -->
                            <optgroup label="üß¨ NAD+ IV Therapy">
                                <option value="nad-therapy|basic|Basic NAD+ IV Drip|450|Introduction NAD+ for cellular repair (250mg)">Basic NAD+ IV Drip - $450</option>
                                <option value="nad-therapy|fountain|Fountain of Youth NAD+ IV Drip|650|Enhanced anti-aging NAD+ formula">Fountain of Youth NAD+ IV Drip - $650</option>
                                <option value="nad-therapy|diamond|Diamond NAD+ IV Drip|850|Premium NAD+ therapy experience">Diamond NAD+ IV Drip - $850</option>
                                <option value="nad-therapy|elite|Elite NAD+ IV Drip|1200|Ultimate NAD+ treatment protocol">Elite NAD+ IV Drip - $1200</option>
                                <option value="nad-therapy|nad-infusion|NAD+ IV Infusion|150|Restore cellular energy (250-500mg per session)">NAD+ IV Infusion - $150</option>
                                <option value="nad-therapy|dna-repair|DNA Repair Protocol|200|High-dose NAD+ with DNA repair peptides">DNA Repair Protocol - $200</option>
                                <option value="nad-therapy|longevity|Longevity Combo Therapy|250|NAD+ IV with anti-aging peptides">Longevity Combo Therapy - $250</option>
                            </optgroup>

                            <!-- HEALING & RECOVERY PEPTIDES -->
                            <optgroup label="üß¨ Healing & Recovery Peptides">
                                <option value="peptides|bpc-157|BPC-157 (Healing Peptide)|120|Tissue repair and gut health optimization">BPC-157 (Healing Peptide) - $120</option>
                                <option value="peptides|tb-500|TB-500 (Thymosin Œ≤4)|130|Tissue repair and wound healing">TB-500 (Thymosin Œ≤4) - $130</option>
                                <option value="peptides|ghk-cu|GHK-Cu (Copper Peptide)|100|Skin regeneration and anti-aging">GHK-Cu (Copper Peptide) - $100</option>
                            </optgroup>

                            <!-- IMMUNE & PERFORMANCE PEPTIDES -->
                            <optgroup label="üß¨ Immune & Performance Peptides">
                                <option value="peptides|thymosin|Thymosin Alpha-1|140|Immune modulation and support">Thymosin Alpha-1 - $140</option>
                                <option value="peptides|follistatin|Follistatin-344|250|Myostatin inhibitor for muscle growth">Follistatin-344 - $250</option>
                                <option value="peptides|pt-141|PT-141 (Bremelanotide)|75|Libido and sexual function enhancement">PT-141 (Bremelanotide) - $75</option>
                                <option value="peptides|dsip|DSIP (Deep Sleep Peptide)|85|Improves deep sleep quality">DSIP (Deep Sleep Peptide) - $85</option>
                            </optgroup>

                            <!-- COGNITIVE PEPTIDES -->
                            <optgroup label="üß¨ Cognitive Enhancement Peptides">
                                <option value="peptides|cerebrolysin|Cerebrolysin|200|Neuroprotective peptide complex for cognition">Cerebrolysin - $200</option>
                                <option value="peptides|nootropic-stack|Nootropic Peptide Stack|160|Cognitive enhancement peptide combinations">Nootropic Peptide Stack - $160</option>
                                <option value="peptides|semax|N-Acetyl Semax Amidate|145|Nootropic peptide (intranasal)">N-Acetyl Semax Amidate - $145</option>
                                <option value="peptides|selank|Selank|115|Anxiolytic/nootropic peptide (intranasal)">Selank - $115</option>
                            </optgroup>

                            <!-- ANTI-AGING PEPTIDES -->
                            <optgroup label="üß¨ Anti-Aging Peptides">
                                <option value="peptides|humanin|Humanin|155|Mitochondrial peptide for cardiovascular support">Humanin - $155</option>
                                <option value="peptides|mots-c|MOTS-c|125|Mitochondrial-derived peptide for metabolism">MOTS-c - $125</option>
                                <option value="peptides|aod-9604|AOD-9604|95|Fat-burning peptide fragment">AOD-9604 - $95</option>
                                <option value="peptides|aicar|AICAR|185|AMPK activator for endurance">AICAR - $185</option>
                            </optgroup>

                            <!-- GROWTH FACTOR PEPTIDES -->
                            <optgroup label="üß¨ Growth Factor Peptides">
                                <option value="peptides|igf-1-lr3|IGF-1 LR3|175|Long-acting IGF-1 for muscle growth">IGF-1 LR3 - $175</option>
                                <option value="peptides|igf-1-des|IGF-1 DES|165|Short-acting IGF-1 variant">IGF-1 DES - $165</option>
                                <option value="peptides|mgf|MGF|145|Muscle growth factor">MGF - $145</option>
                                <option value="peptides|peg-mgf|PEG-MGF|155|PEG-modified muscle growth factor">PEG-MGF - $155</option>
                            </optgroup>

                            <!-- GROWTH HORMONE PEPTIDES -->
                            <optgroup label="üß¨ Growth Hormone Peptides">
                                <option value="peptides|ghrp-6|GHRP-6|110|Growth hormone releasing peptide">GHRP-6 - $110</option>
                                <option value="peptides|ghrp-2|GHRP-2|125|Enhanced growth hormone releasing peptide">GHRP-2 - $125</option>
                                <option value="peptides|hexarelin|Hexarelin|150|Potent growth hormone secretagogue">Hexarelin - $150</option>
                                <option value="peptides|sermorelin|Sermorelin|135|Growth hormone releasing hormone analog">Sermorelin - $135</option>
                                <option value="peptides|cjc-1295|CJC-1295 with DAC|165|Long-acting growth hormone releasing hormone">CJC-1295 with DAC - $165</option>
                                <option value="peptides|mod-grf|MOD GRF 1-29|115|Modified growth hormone releasing factor">MOD GRF 1-29 - $115</option>
                                <option value="peptides|hgh-frag|HGH Fragment 176-191|90|Fat-burning growth hormone fragment">HGH Fragment 176-191 - $90</option>
                            </optgroup>

                            <!-- SPECIALTY PEPTIDES -->
                            <optgroup label="üß¨ Specialty Peptides">
                                <option value="peptides|melanotan-ii|Melanotan II (MT-2)|80|Tanning peptide with appetite effects">Melanotan II (MT-2) - $80</option>
                                <option value="peptides|melanotan-i|Melanotan I|90|Enhanced tanning peptide">Melanotan I - $90</option>
                                <option value="peptides|pnc-27|PNC-27|225|Membrane-active research peptide">PNC-27 - $225</option>
                                <option value="peptides|ll-37|LL-37 (CAP-18)|135|Antimicrobial peptide">LL-37 (CAP-18) - $135</option>
                                <option value="peptides|kpv|KPV (Lys-Pro-Val)|105|Anti-inflammatory peptide for gut health">KPV (Lys-Pro-Val) - $105</option>
                                <option value="peptides|blend|Peptide Blend Complex|210|Multi-peptide customized combination">Peptide Blend Complex - $210</option>
                            </optgroup>

                            <!-- VITAMIN INJECTIONS -->
                            <optgroup label="üíâ Individual Vitamin Injections">
                                <option value="vitamin-shots|b12|Vitamin B12 Injection|13|Methylcobalamin 1000mcg for energy">Vitamin B12 Injection - $13</option>
                                <option value="vitamin-shots|d3|Vitamin D3 Injection|28|50,000 IU for immune and bone health">Vitamin D3 Injection - $28</option>
                                <option value="vitamin-shots|c|Vitamin C Injection|23|1000mg antioxidant and immune support">Vitamin C Injection - $23</option>
                                <option value="vitamin-shots|magnesium|Magnesium Injection|18|200mg magnesium sulfate for muscle relaxation">Magnesium Injection - $18</option>
                                <option value="vitamin-shots|glutathione|Glutathione Injection|48|600mg for detox and skin health">Glutathione Injection - $48</option>
                                <option value="vitamin-shots|myers-injection|Myers' Cocktail Injection|170|Comprehensive vitamin/mineral injection">Myers' Cocktail Injection - $170</option>
                                <option value="vitamin-shots|tri-amino|Tri-Amino Blend Injection|33|L-Arginine, L-Ornithine, L-Lysine for recovery">Tri-Amino Blend Injection - $33</option>
                                <option value="vitamin-shots|zinc|Zinc Injection|8|5mg zinc sulfate for immune support">Zinc Injection - $8</option>
                                <option value="vitamin-shots|biotin|Biotin Injection|13|10,000mcg for hair, skin, and nails">Biotin Injection - $13</option>
                                <option value="vitamin-shots|l-carnitine|L-Carnitine Injection|38|500mg for fat metabolism">L-Carnitine Injection - $38</option>
                            </optgroup>

                            <!-- SPECIALTY SHOTS -->
                            <optgroup label="üíâ Specialty Shots">
                                <option value="vitamin-shots|immune-booster|Immune Booster Shot|50|Comprehensive immune support blend">Immune Booster Shot - $50</option>
                                <option value="vitamin-shots|biotin-beauty|Biotin Beauty Shot|35|Beauty-focused biotin blend">Biotin Beauty Shot - $35</option>
                                <option value="vitamin-shots|glutathione-shot|Glutathione Shot|55|Enhanced glutathione formulation">Glutathione Shot - $55</option>
                            </optgroup>

                            <!-- WEIGHT MANAGEMENT -->
                            <optgroup label="‚öñÔ∏è Weight Management Programs">
                                <option value="weight-management|semaglutide|Semaglutide (Ozempic) Program|350|FDA-approved GLP-1 medication (monthly)">Semaglutide (Ozempic) Program - $350/month</option>
                                <option value="weight-management|tirzepatide|Tirzepatide (Mounjaro) Program|450|Dual-action weight loss medication (monthly)">Tirzepatide (Mounjaro) Program - $450/month</option>
                                <option value="weight-management|lipotropic|Lipotropic Injections|75|MIC + B12 metabolism boosters (weekly)">Lipotropic Injections - $75/week</option>
                                <option value="weight-management|metabolic-support|Metabolic Support IV|200|L-carnitine, B-complex, ALA minerals">Metabolic Support IV - $200</option>
                            </optgroup>

                            <!-- SEXUAL WELLNESS -->
                            <optgroup label="‚ù§Ô∏è Sexual Wellness IVs">
                                <option value="sexual-wellness|vitality|Vitality Boost IV|185|Energy and stamina support">Vitality Boost IV - $185</option>
                                <option value="sexual-wellness|performance|Performance Enhancement IV|225|Physical performance and endurance">Performance Enhancement IV - $225</option>
                                <option value="sexual-wellness|hormone-balance|Hormone Balance IV|195|Hormone production and balance support">Hormone Balance IV - $195</option>
                                <option value="sexual-wellness|wellness-optimization|Wellness Optimization IV|275|Comprehensive vitality complex">Wellness Optimization IV - $275</option>
                            </optgroup>

                            <!-- MOBILE TESTING - HORMONE -->
                            <optgroup label="üî¨ Hormone Testing">
                                <option value="mobile-testing|hormone-comprehensive|Comprehensive Hormone Panel|299|Complete hormone analysis">Comprehensive Hormone Panel - $299</option>
                                <option value="mobile-testing|womens-hormone|Women's Hormone Balance|249|Female hormone optimization panel">Women's Hormone Balance - $249</option>
                                <option value="mobile-testing|mens-hormone|Men's Hormone Optimization|249|Male hormone optimization panel">Men's Hormone Optimization - $249</option>
                            </optgroup>

                            <!-- MOBILE TESTING - WELLNESS -->
                            <optgroup label="üî¨ Wellness & Nutrition Testing">
                                <option value="mobile-testing|vitamin-mineral|Complete Vitamin & Mineral Panel|199|Comprehensive nutritional analysis">Complete Vitamin & Mineral Panel - $199</option>
                                <option value="mobile-testing|antioxidant|Antioxidant & Inflammation|179|Oxidative stress assessment">Antioxidant & Inflammation - $179</option>
                                <option value="mobile-testing|nutrition|Nutrition Assessment Panel|249|Complete nutritional status">Nutrition Assessment Panel - $249</option>
                            </optgroup>

                            <!-- MOBILE TESTING - CARDIOVASCULAR -->
                            <optgroup label="üî¨ Cardiovascular Testing">
                                <option value="mobile-testing|lipid|Advanced Lipid Panel|229|Comprehensive cardiovascular risk">Advanced Lipid Panel - $229</option>
                                <option value="mobile-testing|heart-disease|Heart Disease Risk Assessment|199|Cardiac risk evaluation">Heart Disease Risk Assessment - $199</option>
                                <option value="mobile-testing|cardiovascular|Cardiovascular Health Panel|329|Complete heart health assessment">Cardiovascular Health Panel - $329</option>
                            </optgroup>

                            <!-- MOBILE TESTING - METABOLISM -->
                            <optgroup label="üî¨ Metabolism & Weight Testing">
                                <option value="mobile-testing|metabolic|Metabolic Health Panel|249|Complete metabolic assessment">Metabolic Health Panel - $249</option>
                                <option value="mobile-testing|diabetes|Diabetes Risk Assessment|149|Diabetes screening and prevention">Diabetes Risk Assessment - $149</option>
                                <option value="mobile-testing|metabolic-function|Metabolic Function Panel|279|Advanced metabolic analysis">Metabolic Function Panel - $279</option>
                            </optgroup>

                            <!-- MOBILE TESTING - GUT HEALTH -->
                            <optgroup label="üî¨ Gut Health Testing">
                                <option value="mobile-testing|microbiome|Comprehensive Microbiome Analysis|299|Complete gut microbiome assessment">Comprehensive Microbiome Analysis - $299</option>
                                <option value="mobile-testing|sibo|SIBO & Digestive Health|199|Small intestinal bacterial overgrowth">SIBO & Digestive Health - $199</option>
                            </optgroup>

                            <!-- MOBILE TESTING - TOXINS -->
                            <optgroup label="üî¨ Toxins & Heavy Metals Testing">
                                <option value="mobile-testing|heavy-metals|Heavy Metals Panel|199|Toxic metal exposure assessment">Heavy Metals Panel - $199</option>
                                <option value="mobile-testing|environmental|Environmental Toxins|249|Environmental exposure analysis">Environmental Toxins - $249</option>
                                <option value="mobile-testing|environmental-panel|Environmental Toxins Panel|379|Comprehensive environmental assessment">Environmental Toxins Panel - $379</option>
                                <option value="mobile-testing|mold|Mold Exposure Panel|329|Mold and mycotoxin testing">Mold Exposure Panel - $329</option>
                            </optgroup>

                            <!-- MOBILE TESTING - IMMUNE -->
                            <optgroup label="üî¨ Immune System Testing">
                                <option value="mobile-testing|immune|Comprehensive Immune Panel|279|Complete immune system analysis">Comprehensive Immune Panel - $279</option>
                                <option value="mobile-testing|autoimmune|Autoimmune Disease Screening|199|Autoimmune condition screening">Autoimmune Disease Screening - $199</option>
                                <option value="mobile-testing|autoimmune-panel|Autoimmune Panel|349|Advanced autoimmune assessment">Autoimmune Panel - $349</option>
                                <option value="mobile-testing|immune-system|Immune System Panel|299|Immune function evaluation">Immune System Panel - $299</option>
                            </optgroup>

                            <!-- MOBILE TESTING - ALLERGIES -->
                            <optgroup label="üî¨ Allergies & Sensitivities Testing">
                                <option value="mobile-testing|environmental-allergy|Environmental Allergy Panel|299|Environmental allergen testing">Environmental Allergy Panel - $299</option>
                                <option value="mobile-testing|food-sensitivity|Food Sensitivity Panel|349|Food sensitivity and intolerance">Food Sensitivity Panel - $349</option>
                            </optgroup>

                            <!-- MOBILE TESTING - SEX-SPECIFIC -->
                            <optgroup label="üî¨ Sex-Specific Testing">
                                <option value="mobile-testing|female|Female Health Panel|399|Comprehensive women's health">Female Health Panel - $399</option>
                                <option value="mobile-testing|male|Male Health Panel|399|Comprehensive men's health">Male Health Panel - $399</option>
                                <option value="mobile-testing|pregnancy|Pregnancy & Prenatal Care Panel|349|Prenatal and pregnancy health">Pregnancy & Prenatal Care Panel - $349</option>
                            </optgroup>

                            <!-- MOBILE TESTING - GENERAL -->
                            <optgroup label="üî¨ General Health Testing">
                                <option value="mobile-testing|basic|Basic Laboratory Markers|199|Essential health markers">Basic Laboratory Markers - $199</option>
                                <option value="mobile-testing|adrenal|Adrenal & Stress Panel|279|Stress and adrenal function">Adrenal & Stress Panel - $279</option>
                                <option value="mobile-testing|covid|COVID-19 Testing Panel|149|COVID-19 screening and testing">COVID-19 Testing Panel - $149</option>
                                <option value="mobile-testing|infection|Infection Screening Panel|249|Infectious disease screening">Infection Screening Panel - $249</option>
                                <option value="mobile-testing|lyme|Lyme & Tickborne Disease Panel|399|Lyme disease and co-infections">Lyme & Tickborne Disease Panel - $399</option>
                                <option value="mobile-testing|medications|Medications & Drugs Panel|199|Drug screening and metabolism">Medications & Drugs Panel - $199</option>
                                <option value="mobile-testing|oral|Oral Health Panel|199|Oral health and periodontal">Oral Health Panel - $199</option>
                                <option value="mobile-testing|oxidative|Oxidative Stress Panel|279|Oxidative stress and antioxidants">Oxidative Stress Panel - $279</option>
                                <option value="mobile-testing|pancreatic|Pancreatic Function Panel|299|Pancreatic health assessment">Pancreatic Function Panel - $299</option>
                                <option value="mobile-testing|renal|Renal Function Panel|249|Kidney function evaluation">Renal Function Panel - $249</option>
                                <option value="mobile-testing|sleep|Sleep Quality Panel|329|Sleep disorder assessment">Sleep Quality Panel - $329</option>
                                <option value="mobile-testing|thyroid|Thyroid Function Panel|299|Complete thyroid evaluation">Thyroid Function Panel - $299</option>
                                <option value="mobile-testing|tumor|Tumor Markers Panel|399|Cancer screening markers">Tumor Markers Panel - $399</option>
                            </optgroup>

                            <!-- MEMBERSHIP PLANS -->
                            <optgroup label="‚≠ê Monthly Membership Plans">
                                <option value="membership|shot-pass|Shot Pass|99|4 vitamin injection shots per month">Shot Pass - $99/month</option>
                                <option value="membership|wellness-explorer|Wellness Explorer|199|2 IV therapy sessions + 4 vitamin shots monthly">Wellness Explorer - $199/month</option>
                                <option value="membership|wellness-elite|Wellness Elite|349|4 IV sessions + 8 vitamin shots monthly">Wellness Elite - $349/month</option>
                                <option value="membership|wellness-platinum|Wellness Platinum|599|Unlimited IV therapy and injections">Wellness Platinum - $599/month</option>
                            </optgroup>

                            <!-- VITAMIN INJECTION MEMBERSHIPS -->
                            <optgroup label="‚≠ê Vitamin Injection Memberships">
                                <option value="membership|basic-plan|Basic Plan|199|6 injections per year + 20% off additional (yearly)">Basic Plan - $199/year</option>
                                <option value="membership|premium-plan|Premium Plan|399|12 injections per year + 30% off additional (yearly)">Premium Plan - $399/year</option>
                                <option value="membership|elite-plan|Elite Plan|899|24 injections per year + 50% off other services (yearly)">Elite Plan - $899/year</option>
                            </optgroup>

                            <!-- TELEHEALTH SERVICES -->
                            <optgroup label="üì± Telehealth Consultations">
                                <option value="telehealth|virtual|Virtual Consultations|150|60-minute medical consultations via video">Virtual Consultations - $150</option>
                                <option value="telehealth|follow-up|Follow-up Care|75|30-minute monitoring and adjustment sessions">Follow-up Care - $75</option>
                                <option value="telehealth|prescription|Prescription Management|50|Medication reviews and refills">Prescription Management - $50</option>
                                <option value="telehealth|health-coaching|Health Coaching|100|Lifestyle coaching and nutrition planning">Health Coaching - $100</option>
                            </optgroup>
                        </select>
          </div>

          <div class="selected-service-info" id="selected-service-info">
            <div class="selected-service-name" id="selected-service-name"></div>
            <div class="selected-service-description" id="selected-service-description"></div>
            <div class="selected-service-price" id="selected-service-price"></div>
          </div>

          <div class="dropdown-cart-action">
            <button class="btn btn-large" onclick="addDropdownServiceToCart()" id="dropdown-add-to-cart" disabled>
                            üõí Add Selected Service to Cart
                        </button>
          </div>
        </div>

        <!-- OR Separator -->
        <div
          style="text-align: center; margin: 32px 0; color: var(--medium-gray); font-weight: 600; position: relative;">
          <div style="height: 1px; background: var(--border-color); margin: 16px 0;"></div>
          <span style="background: var(--light-gray); padding: 0 24px; font-size: 14px;">OR Browse by Category</span>
        </div>

        <!-- Main Service Categories -->
        <div class="service-categories">
          <div class="service-category" data-service="iv-therapy" data-intakeq-category="standard-iv">
            <div class="selection-indicator">‚úì</div>
            <div class="service-icon">üíß</div>
            <h3 class="service-name">IV Therapy</h3>
            <p class="service-description" style="margin: 3px 0 0 1px;">Hydration, energy, immunity, and recovery IV
              drips with premium vitamins and minerals</p>
            <div class="service-price">Starting at $149</div>
          </div>

          <div class="service-category" data-service="nad-peptides" data-intakeq-category="nad-iv">
            <div class="selection-indicator">‚úì</div>
            <div class="service-icon">üß¨</div>
            <h3 class="service-name">NAD+ & Peptides</h3>
            <p class="service-description">Advanced anti-aging, cellular repair, and regenerative therapies</p>
            <div class="service-price">Starting at $350</div>
          </div>

          <div class="service-category" data-service="vitamin-shots" data-intakeq-category="vitamin-shots">
            <div class="selection-indicator">‚úì</div>
            <div class="service-icon">üíâ</div>
            <h3 class="service-name">Vitamin Injections</h3>
            <p class="service-description">Quick B12, vitamin D, fat-burning and energy shots</p>
            <div class="service-price">Starting at $35</div>
          </div>

          <div class="service-category" data-service="weight-management" data-intakeq-category="weight-management">
            <div class="selection-indicator">‚úì</div>
            <div class="service-icon">‚öñÔ∏è</div>
            <h3 class="service-name">Weight Management</h3>
            <p class="service-description">GLP-1 medications, metabolic support, and comprehensive weight loss programs
            </p>
            <div class="service-price">Starting at $199</div>
          </div>

          <div class="service-category" data-service="hormone-therapy" data-intakeq-category="hormone-therapy">
            <div class="selection-indicator">‚úì</div>
            <div class="service-icon">‚ù§Ô∏è</div>
            <h3 class="service-name">Sexual Wellness</h3>
            <p class="service-description">Discreet hormone therapy and sexual health treatments</p>
            <div class="service-price">Starting at $125</div>
          </div>

          <div class="service-category" data-service="mobile-testing" data-intakeq-category="basic-iv">
            <div class="selection-indicator">ÔøΩÔøΩ</div>
            <div class="service-icon">üî¨</div>
            <h3 class="service-name">Mobile Testing</h3>
            <p class="service-description">Comprehensive health testing and lab work at your location</p>
            <div class="service-price">Starting at $99</div>
          </div>

          <div class="service-category" data-service="membership" data-intakeq-category="membership">
            <div class="selection-indicator">‚úì</div>
            <div class="service-icon">‚≠ê</div>
            <h3 class="service-name">Membership Plans</h3>
            <p class="service-description">Unlimited treatments with priority booking and exclusive pricing</p>
            <div class="service-price">Starting at $99/month</div>
          </div>

          <div class="service-category" data-service="telehealth" data-intakeq-category="basic-iv">
            <div class="selection-indicator">‚úì</div>
            <div class="service-icon">üì±</div>
            <h3 class="service-name">Telehealth</h3>
            <p class="service-description">Virtual consultations and medical guidance from licensed providers</p>
            <div class="service-price">Starting at $150</div>
          </div>
        </div>

        <!-- Service Options (shown when category is selected) -->
        <div class="service-options" id="service-options">
          <h3 id="options-title" style="text-align: center; margin-bottom: 20px; color: var(--dark-slate);"></h3>
          <div class="options-grid" id="options-grid">
            <!-- Options will be populated dynamically -->
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="cart-actions">
          <button class="btn btn-secondary" onclick="addToCartAndContinue()" id="add-to-cart-btn" disabled>
                        üõí Add to Cart
                    </button>
          <button class="btn btn-large" onclick="bookNowWithIntakeQ()" id="book-now-btn" disabled>
                        üìÖ Book Now
                    </button>
        </div>
      </div>

      <!-- Step 2: IntakeQ Booking Interface -->
      <div class="step-container" id="step-2">
        <div class="step-header">
          <h1 class="step-title">Schedule Your Appointment</h1>
          <p class="step-subtitle">Complete your booking using our secure appointment system. Select your preferred
            date, time, and provide your information.</p>
        </div>

        <div class="intakeq-section">
          <h3 class="intakeq-title">Professional Booking System</h3>
          <p class="intakeq-subtitle">Our HIPAA-compliant booking system ensures your privacy and allows you to schedule
            with our licensed medical professionals.</p>

          <!-- IntakeQ Widget Container -->
          <div id="intakeq"></div>
        </div>

        <div class="cart-actions">
          <button class="btn btn-secondary" onclick="goToStep(1)">
                        ‚Üê Back to Services
                    </button>
          <button class="btn btn-success" onclick="goToStep(3)">
                        Booking Complete ‚úì
                    </button>
        </div>
      </div>

      <!-- Step 3: Confirmation -->
      <div class="step-container" id="step-3">
        <div class="step-header">
          <div
            style="width: 80px; height: 80px; background: var(--soft-green); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px; font-size: 40px; color: white;">
            ‚úì</div>
          <h1 class="step-title">Booking Confirmed!</h1>
          <p class="step-subtitle">Your appointment has been successfully scheduled. You'll receive a confirmation email
            with all the details shortly.</p>
        </div>

        <div
          style="background: var(--light-gray); border-radius: 16px; padding: 32px; margin: 32px 0; text-align: center;">
          <h3 style="margin-bottom: 16px; color: var(--dark-slate);">What's Next?</h3>
          <ul style="list-style: none; color: var(--medium-gray); line-height: 2;">
            <li>üìß Confirmation email sent to your inbox</li>
            <li>üì± Text reminder 24 hours before your appointment</li>
            <li>üè• Licensed medical professional will arrive at your location</li>
            <li>üí™ Enjoy your wellness treatment!</li>
          </ul>
        </div>

        <div class="cart-actions">
          <a href="../index.html" class="btn btn-secondary">Return Home</a>
          <button class="btn" onclick="startOver()">Book Another Service</button>
        </div>
      </div>
    </div>

    <!-- Contact Section -->
    <div class="contact-section">
      <h3>Need Help or Have Questions?</h3>
      <p>Our wellness experts are standing by to assist you with any questions about our services or to help you choose
        the right treatment for your needs.</p>

      <div class="contact-buttons">
        <a href="tel:+1-602-688-9825" class="contact-btn">
          üìû Call (602) 688-9825
        </a>
        <a href="mailto:info@staydrippediv.com" class="contact-btn">
          ‚úâÔ∏è Email Support
        </a>
        <a href="https://staydripped.intakeq.com/booking" class="contact-btn" target="_blank">
          üåê Patient Portal
        </a>
      </div>
    </div>
  </main>

  <!-- Load Required Scripts -->
  <script src="../shared/navigation-loader-optimized.js"></script>
  <script src="../shared/intakeq-integration.js"></script>
  <script src="../shared/cart.js"></script>

  <script>
    // Booking State Management
        class EnhancedBookingSystem {
            constructor() {
                this.currentStep = 1;
                this.selectedService = null;
                this.selectedOption = null;
                this.selectedCategory = null;
                this.intakeQCategory = null;
                
                this.serviceOptions = {
                    'iv-therapy': [
                        { id: 'hydration-plus', name: 'Hydration Plus', price: 149, description: 'Essential electrolytes and fluids for optimal hydration' },
                        { id: 'energy-boost', name: 'Energy Boost IV', price: 199, description: 'B-complex vitamins and nutrients for sustained energy' },
                        { id: 'immunity-support', name: 'Immunity Support', price: 225, description: 'Vitamin C, zinc, and immune-boosting nutrients' },
                        { id: 'athletic-recovery', name: 'Athletic Recovery', price: 275, description: 'Amino acids and nutrients for muscle recovery' },
                        { id: 'myers-cocktail', name: 'Myers\' Cocktail', price: 250, description: 'Complete vitamin and mineral infusion' },
                        { id: 'hangover-relief', name: 'Hangover Relief', price: 199, description: 'Rapid recovery from dehydration and toxins' }
                    ],
                    'nad-peptides': [
                        { id: 'basic-nad', name: 'Basic NAD+ (250mg)', price: 350, description: 'Introduction to NAD+ therapy for cellular repair' },
                        { id: 'premium-nad', name: 'Premium NAD+ (500mg)', price: 550, description: 'Enhanced anti-aging and cellular optimization' },
                        { id: 'bpc-157', name: 'BPC-157 Healing Peptide', price: 120, description: 'Tissue repair and gut health optimization' },
                        { id: 'growth-peptides', name: 'Growth Hormone Peptides', price: 180, description: 'Ipamorelin + CJC-1295 for optimization' }
                    ],
                    'vitamin-shots': [
                        { id: 'b12-shot', name: 'B12 Energy Shot', price: 35, description: '1000mcg instant energy boost' },
                        { id: 'vitamin-d', name: 'Vitamin D3 Boost', price: 45, description: '50,000 IU immune support' },
                        { id: 'b-complex', name: 'B-Complex Shot', price: 50, description: 'Complete B-vitamin blend' },
                        { id: 'fat-burner', name: 'Fat Burner Shot', price: 65, description: 'Lipotropic blend for metabolism' },
                        { id: 'b12-package', name: 'B12 4-Pack', price: 120, description: 'Four B12 shots for extended benefits' }
                    ],
                    'weight-management': [
                        { id: 'semaglutide', name: 'Semaglutide Program', price: 199, description: 'Weekly GLP-1 injections with coaching' },
                        { id: 'tirzepatide', name: 'Tirzepatide Program', price: 299, description: 'Advanced dual-action weight loss' },
                        { id: 'metabolic-iv', name: 'Metabolic IV Package', price: 175, description: 'Fat-burning IV with supplements' },
                        { id: 'consultation', name: 'Weight Loss Consultation', price: 150, description: 'Comprehensive assessment and plan' }
                    ],
                    'hormone-therapy': [
                        { id: 'testosterone', name: 'Testosterone Therapy', price: 125, description: 'Hormone optimization for men' },
                        { id: 'bioidentical', name: 'Bioidentical Hormones', price: 150, description: 'Natural hormone replacement' },
                        { id: 'sexual-enhancement', name: 'Sexual Enhancement', price: 125, description: 'Treatments for enhanced performance' },
                        { id: 'consultation', name: 'Hormone Consultation', price: 100, description: 'Comprehensive hormone assessment' }
                    ],
                    'mobile-testing': [
                        { id: 'basic-panel', name: 'Basic Wellness Panel', price: 99, description: 'Complete blood count and metabolic panel' },
                        { id: 'comprehensive', name: 'Comprehensive Health Screen', price: 199, description: 'Extended lab work including hormones' },
                        { id: 'std-testing', name: 'STD Testing', price: 149, description: 'Discreet and comprehensive screening' },
                        { id: 'hormone-panel', name: 'Hormone Panel', price: 175, description: 'Complete hormone level assessment' }
                    ],
                    'membership': [
                        { id: 'shot-pass', name: 'Monthly Shot Pass', price: 99, description: 'Unlimited vitamin shots per month' },
                        { id: 'wellness-explorer', name: 'Wellness Explorer', price: 399, description: '2 IV treatments + unlimited shots monthly' },
                        { id: 'platinum', name: 'Wellness Platinum', price: 799, description: 'Unlimited treatments + priority booking' },
                        { id: 'corporate', name: 'Corporate Package', price: 1299, description: 'Team wellness programs and events' }
                    ],
                    'telehealth': [
                        { id: 'initial-consult', name: 'Initial Consultation', price: 150, description: 'Comprehensive health assessment' },
                        { id: 'follow-up', name: 'Follow-up Visit', price: 75, description: 'Progress review and adjustments' },
                        { id: 'prescription', name: 'Prescription Management', price: 100, description: 'Medication review and management' },
                        { id: 'wellness-plan', name: 'Wellness Planning', price: 125, description: 'Personalized wellness strategy' }
                    ]
                };

                this.init();
            }

            init() {
                this.bindEvents();
                this.trackPageView();
                this.dropdownSelection = null;
            }

            bindEvents() {
                // Service category selection
                document.querySelectorAll('.service-category').forEach(category => {
                    category.addEventListener('click', (e) => this.selectService(e.currentTarget));
                });

                // Option selection
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('option-card') || e.target.closest('.option-card')) {
                        this.selectOption(e.target.closest('.option-card'));
                    }
                });

                // Dropdown selection
                const dropdown = document.getElementById('complete-service-dropdown');
                if (dropdown) {
                    dropdown.addEventListener('change', (e) => this.handleDropdownSelection(e.target));
                }
            }

            selectService(categoryElement) {
                // Remove previous selections
                document.querySelectorAll('.service-category').forEach(cat => cat.classList.remove('selected'));
                document.querySelectorAll('.option-card').forEach(opt => opt.classList.remove('selected'));
                
                // Select current category
                categoryElement.classList.add('selected');
                
                this.selectedService = categoryElement.dataset.service;
                this.intakeQCategory = categoryElement.dataset.intakeqCategory;
                this.selectedOption = null;

                // Show options for this service
                this.showServiceOptions(this.selectedService);
                
                // Update button states
                this.updateButtonStates();
                
                // Track selection
                this.trackEvent('service_category_selected', {
                    service_type: this.selectedService,
                    intakeq_category: this.intakeQCategory
                });

                // Add animation
                categoryElement.classList.add('fade-in');
            }

            showServiceOptions(serviceType) {
                const optionsContainer = document.getElementById('service-options');
                const optionsGrid = document.getElementById('options-grid');
                const optionsTitle = document.getElementById('options-title');
                
                const options = this.serviceOptions[serviceType];
                if (!options) return;

                // Set title
                const serviceName = document.querySelector(`[data-service="${serviceType}"] .service-name`).textContent;
                optionsTitle.textContent = `Choose Your ${serviceName} Option`;

                // Clear and populate options
                optionsGrid.innerHTML = '';
                
                options.forEach(option => {
                    const optionCard = this.createOptionCard(option);
                    optionsGrid.appendChild(optionCard);
                });

                // Show options section
                optionsContainer.classList.add('active');
                optionsContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            createOptionCard(option) {
                const card = document.createElement('div');
                card.className = 'option-card';
                card.dataset.optionId = option.id;
                card.dataset.price = option.price;
                card.dataset.name = option.name;
                
                card.innerHTML = `
                    <div class="selection-indicator">‚úì</div>
                    <div class="option-name">${option.name}</div>
                    <div class="option-description">${option.description}</div>
                    <div class="option-price">$${option.price}</div>
                `;

                return card;
            }

            selectOption(optionCard) {
                // Remove previous option selections
                document.querySelectorAll('.option-card').forEach(opt => opt.classList.remove('selected'));
                
                // Select current option
                optionCard.classList.add('selected');
                
                this.selectedOption = {
                    id: optionCard.dataset.optionId,
                    name: optionCard.dataset.name,
                    price: parseFloat(optionCard.dataset.price)
                };

                // Update button states
                this.updateButtonStates();

                // Track selection
                this.trackEvent('service_option_selected', {
                    option_id: this.selectedOption.id,
                    option_name: this.selectedOption.name,
                    option_price: this.selectedOption.price
                });

                // Add animation
                optionCard.classList.add('slide-in');
            }

            updateButtonStates() {
                const addToCartBtn = document.getElementById('add-to-cart-btn');
                const bookNowBtn = document.getElementById('book-now-btn');
                
                const hasService = this.selectedService !== null;
                const hasOption = this.selectedOption !== null;
                
                // Enable buttons based on selection state
                if (hasService) {
                    addToCartBtn.disabled = !hasOption;
                    bookNowBtn.disabled = false; // Can book with just category for IntakeQ
                    
                    if (hasOption) {
                        addToCartBtn.innerHTML = `üõí Add ${this.selectedOption.name} to Cart`;
                    } else {
                        addToCartBtn.innerHTML = `üõí Add to Cart`;
                    }
                } else {
                    addToCartBtn.disabled = true;
                    bookNowBtn.disabled = true;
                }
            }

            // Handle dropdown service selection
            handleDropdownSelection(selectElement) {
                const value = selectElement.value;
                if (!value) {
                    document.getElementById('selected-service-info').classList.remove('show');
                    document.getElementById('dropdown-add-to-cart').disabled = true;
                    return;
                }

                const [category, serviceId, serviceName, price, description] = value.split('|');

                // Update selected service info display
                document.getElementById('selected-service-name').textContent = serviceName;
                document.getElementById('selected-service-description').textContent = description;
                document.getElementById('selected-service-price').textContent = `$${price}`;
                document.getElementById('selected-service-info').classList.add('show');
                document.getElementById('dropdown-add-to-cart').disabled = false;

                // Store selection for cart
                this.dropdownSelection = {
                    category: category,
                    id: serviceId,
                    name: serviceName,
                    price: parseFloat(price),
                    description: description
                };

                // Track selection
                this.trackEvent('dropdown_service_selected', {
                    service_category: category,
                    service_id: serviceId,
                    service_name: serviceName,
                    service_price: parseFloat(price)
                });
            }

            // Add dropdown selected service to cart
            addDropdownServiceToCart() {
                if (!this.dropdownSelection) {
                    this.showError('Please select a service from the dropdown first.');
                    return;
                }

                try {
                    const cartItem = {
                        id: `${this.dropdownSelection.category}-${this.dropdownSelection.id}`,
                        name: this.dropdownSelection.name,
                        price: this.dropdownSelection.price,
                        category: this.dropdownSelection.category,
                        description: this.dropdownSelection.description
                    };

                    // Add to cart using the global cart system
                    if (window.stayDrippedCart) {
                        window.stayDrippedCart.addItem(cartItem);
                        this.showSuccess(`${this.dropdownSelection.name} added to cart successfully!`);

                        // Track cart addition
                        this.trackEvent('add_to_cart_dropdown', {
                            item_id: cartItem.id,
                            item_name: cartItem.name,
                            item_category: cartItem.category,
                            price: cartItem.price
                        });

                        // Reset dropdown selection
                        document.getElementById('complete-service-dropdown').value = '';
                        document.getElementById('selected-service-info').classList.remove('show');
                        document.getElementById('dropdown-add-to-cart').disabled = true;
                        this.dropdownSelection = null;

                        // Show cart widget
                        setTimeout(() => {
                            if (window.stayDrippedCart.showCart) {
                                window.stayDrippedCart.showCart();
                            }
                        }, 1000);
                    } else {
                        console.warn('Cart system not available');
                        this.showError('Cart system is currently unavailable. Please try booking directly.');
                    }
                } catch (error) {
                    console.error('Error adding dropdown item to cart:', error);
                    this.showError('Failed to add item to cart. Please try again.');
                }
            }

            // Add selected item to cart
            addToCartAndContinue() {
                if (!this.selectedService || !this.selectedOption) {
                    this.showError('Please select a service and option first.');
                    return;
                }

                try {
                    const cartItem = {
                        id: `${this.selectedService}-${this.selectedOption.id}`,
                        name: this.selectedOption.name,
                        price: this.selectedOption.price,
                        category: this.selectedService,
                        description: document.querySelector(`[data-option-id="${this.selectedOption.id}"] .option-description`).textContent
                    };

                    // Add to cart using the global cart system
                    if (window.stayDrippedCart) {
                        window.stayDrippedCart.addItem(cartItem);
                        this.showSuccess(`${this.selectedOption.name} added to cart successfully!`);
                        
                        // Track cart addition
                        this.trackEvent('add_to_cart', {
                            item_id: cartItem.id,
                            item_name: cartItem.name,
                            item_category: cartItem.category,
                            price: cartItem.price
                        });

                        // Show cart widget
                        setTimeout(() => {
                            if (window.stayDrippedCart.showCart) {
                                window.stayDrippedCart.showCart();
                            }
                        }, 1000);
                    } else {
                        console.warn('Cart system not available');
                        this.showError('Cart system is currently unavailable. Please try booking directly.');
                    }
                } catch (error) {
                    console.error('Error adding item to cart:', error);
                    this.showError('Failed to add item to cart. Please try again.');
                }
            }

            // Book now with IntakeQ integration
            bookNowWithIntakeQ() {
                if (!this.selectedService || !this.intakeQCategory) {
                    this.showError('Please select a service first.');
                    return;
                }

                try {
                    // Track booking attempt
                    this.trackEvent('booking_attempt', {
                        service_type: this.selectedService,
                        intakeq_category: this.intakeQCategory,
                        option_selected: this.selectedOption ? this.selectedOption.name : 'none'
                    });

                    // Go to step 2 and load IntakeQ widget
                    this.goToStep(2);
                    
                    // Load appropriate IntakeQ widget
                    setTimeout(() => {
                        if (window.intakeQIntegration) {
                            console.log(`Loading IntakeQ widget for category: ${this.intakeQCategory}`);
                            window.intakeQIntegration.loadServiceWidget(this.intakeQCategory, 'intakeq');
                        } else {
                            console.error('IntakeQ integration not available');
                            this.showError('Booking system is currently unavailable. Please call us at (602) 688-9825.');
                        }
                    }, 500);

                } catch (error) {
                    console.error('Error initiating booking:', error);
                    this.showError('Unable to start booking process. Please try again or call us directly.');
                }
            }

            goToStep(stepNumber) {
                // Hide current step
                document.querySelectorAll('.step-container').forEach(step => step.classList.remove('active'));
                
                // Show target step
                const targetStep = document.getElementById(`step-${stepNumber}`);
                if (targetStep) {
                    targetStep.classList.add('active');
                }

                // Update progress indicator
                this.updateProgress(stepNumber);
                
                // Update current step
                this.currentStep = stepNumber;

                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            updateProgress(activeStep) {
                const steps = document.querySelectorAll('.progress-step');
                const connectors = document.querySelectorAll('.progress-connector');

                steps.forEach((step, index) => {
                    const stepNumber = index + 1;
                    step.classList.remove('active', 'completed');
                    
                    if (stepNumber === activeStep) {
                        step.classList.add('active');
                    } else if (stepNumber < activeStep) {
                        step.classList.add('completed');
                    }
                });

                connectors.forEach((connector, index) => {
                    connector.classList.remove('completed');
                    if (index + 1 < activeStep) {
                        connector.classList.add('completed');
                    }
                });
            }

            startOver() {
                // Reset all state
                this.selectedService = null;
                this.selectedOption = null;
                this.selectedCategory = null;
                this.intakeQCategory = null;

                // Clear selections
                document.querySelectorAll('.service-category').forEach(cat => cat.classList.remove('selected'));
                document.querySelectorAll('.option-card').forEach(opt => opt.classList.remove('selected'));
                
                // Hide options
                document.getElementById('service-options').classList.remove('active');
                
                // Reset buttons
                this.updateButtonStates();
                
                // Go to step 1
                this.goToStep(1);

                // Clear messages
                this.hideMessages();
            }

            showError(message) {
                const errorDiv = document.getElementById('error-message');
                const errorText = document.getElementById('error-text');
                errorText.textContent = message;
                errorDiv.classList.add('show');
                
                // Auto-hide after 5 seconds
                setTimeout(() => {
                    errorDiv.classList.remove('show');
                }, 5000);
            }

            showSuccess(message) {
                const successDiv = document.getElementById('success-message');
                const successText = document.getElementById('success-text');
                successText.textContent = message;
                successDiv.classList.add('show');
                
                // Auto-hide after 3 seconds
                setTimeout(() => {
                    successDiv.classList.remove('show');
                }, 3000);
            }

            hideMessages() {
                document.getElementById('error-message').classList.remove('show');
                document.getElementById('success-message').classList.remove('show');
            }

            trackEvent(eventName, parameters = {}) {
                if (typeof gtag !== 'undefined') {
                    gtag('event', eventName, parameters);
                }
                console.log('Track event:', eventName, parameters);
            }

            trackPageView() {
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'page_view', {
                        page_title: 'Enhanced Booking System',
                        page_location: window.location.href
                    });
                }
            }
        }

        // Global functions for button handlers
        function addToCartAndContinue() {
            window.bookingSystem.addToCartAndContinue();
        }

        function addDropdownServiceToCart() {
            window.bookingSystem.addDropdownServiceToCart();
        }

        function bookNowWithIntakeQ() {
            window.bookingSystem.bookNowWithIntakeQ();
        }

        function goToStep(stepNumber) {
            window.bookingSystem.goToStep(stepNumber);
        }

        function startOver() {
            window.bookingSystem.startOver();
        }

        // Initialize booking system when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing enhanced booking system...');
            
            // Initialize booking system
            window.bookingSystem = new EnhancedBookingSystem();
            
            // Additional initialization
            setTimeout(() => {
                console.log('Booking system ready');
                
                // Check if all integrations are loaded
                const integrations = {
                    cart: !!window.stayDrippedCart,
                    intakeq: !!window.intakeQIntegration,
                    analytics: typeof gtag !== 'undefined'
                };
                
                console.log('Available integrations:', integrations);
            }, 1000);
        });

        // Handle browser back button
        window.addEventListener('popstate', function(event) {
            if (window.bookingSystem) {
                window.bookingSystem.startOver();
            }
        });
  </script>


  </head>

  <body>
    <!-- Load Navigation -->
    <div id="navigation-placeholder"></div>

    <div class="container">
      <div class="progress-indicator">
        <div class="progress-step completed">
          <div class="step-number">1</div>
          <span>Cart</span>
        </div>
        <div style="width: 40px; height: 2px; background: var(--border-color);"></div>
        <div class="progress-step active">
          <div class="step-number">2</div>
          <span>Checkout</span>
        </div>
        <div style="width: 40px; height: 2px; background: var(--border-color);"></div>
        <div class="progress-step">
          <div class="step-number">3</div>
          <span>Complete</span>
        </div>
      </div>

      <div class="checkout-container" id="checkout-container">
        <!-- This will be populated by JavaScript -->
      </div>
    </div>

    <!-- Cart System -->
    <script src="../shared/cart.js"></script>

    <!-- Optimized Navigation Loader -->
    <script src="../shared/navigation-loader-optimized.js"></script>

    <script>
      // Load cart from new cart system if available, fallback to old format
        let cart = [];
        if (window.stayDrippedCart) {
            cart = window.stayDrippedCart.getItems();
        } else {
            cart = JSON.parse(localStorage.getItem('cart')) || JSON.parse(localStorage.getItem('staydripped_cart')) || [];
        }
        
        function renderCheckout() {
            const container = document.getElementById('checkout-container');
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="empty-cart" style="grid-column: 1 / -1;">
                        <div style="font-size: 80px; margin-bottom: 24px;">üõí</div>
                        <h3>Your cart is empty</h3>
                        <p>Add some supplements or test kits to get started with your wellness journey.</p>
                        <a href="supplements-testkits.html" class="btn">Shop Products</a>
                    </div>
                `;
                return;
            }

            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const shipping = subtotal > 100 ? 0 : 9.99;
            const tax = subtotal * 0.08; // 8% tax rate
            const total = subtotal + shipping + tax;

            container.innerHTML = `
                <!-- Checkout Form -->
                <div class="checkout-main">
                    <h1 class="page-title">Checkout</h1>
                    <p class="page-subtitle">Complete your order to start your wellness journey</p>

                    <form id="checkout-form">
                        <!-- Contact Information -->
                        <div class="form-section">
                            <h2 class="section-title">Contact Information</h2>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="email">Email Address <span class="required">*</span></label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone Number <span class="required">*</span></label>
                                    <input type="tel" id="phone" name="phone" required>
                                </div>
                            </div>
                        </div>

                        <!-- Appointment Details -->
                        ${getAppointmentSection()}

                        <!-- Service Address -->
                        <div class="form-section">
                            <h2 class="section-title">${getAddressTitle()}</h2>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="first-name">First Name <span class="required">*</span></label>
                                    <input type="text" id="first-name" name="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="last-name">Last Name <span class="required">*</span></label>
                                    <input type="text" id="last-name" name="lastName" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="address">Street Address <span class="required">*</span></label>
                                    <input type="text" id="address" name="address" required>
                                </div>
                                <div class="form-group">
                                    <label for="city">City <span class="required">*</span></label>
                                    <input type="text" id="city" name="city" required>
                                </div>
                                <div class="form-group">
                                    <label for="state">State <span class="required">*</span></label>
                                    <select id="state" name="state" required>
                                        <option value="">Select State</option>
                                        <option value="AZ">Arizona</option>
                                        <option value="CA">California</option>
                                        <option value="NV">Nevada</option>
                                        <option value="UT">Utah</option>
                                        <option value="CO">Colorado</option>
                                        <option value="NM">New Mexico</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="zip">ZIP Code <span class="required">*</span></label>
                                    <input type="text" id="zip" name="zip" required>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Method -->
                        <div class="form-section">
                            <h2 class="section-title">Payment Method</h2>
                            <div class="payment-methods">
                                <div class="payment-method selected" data-method="card">
                                    <div style="font-size: 24px; margin-bottom: 8px;">üí≥</div>
                                    <span>Credit Card</span>
                                </div>
                                <div class="payment-method" data-method="paypal">
                                    <div style="font-size: 24px; margin-bottom: 8px;">üÖøÔ∏è</div>
                                    <span>PayPal</span>
                                </div>
                                <div class="payment-method" data-method="apple">
                                    <div style="font-size: 24px; margin-bottom: 8px;">üçé</div>
                                    <span>Apple Pay</span>
                                </div>
                            </div>

                            <div id="card-details">
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label for="card-number">Card Number <span class="required">*</span></label>
                                        <input type="text" id="card-number" name="cardNumber" placeholder="1234 5678 9012 3456" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="expiry">Expiry Date <span class="required">*</span></label>
                                        <input type="text" id="expiry" name="expiry" placeholder="MM/YY" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="cvv">CVV <span class="required">*</span></label>
                                        <input type="text" id="cvv" name="cvv" placeholder="123" required>
                                    </div>
                                    <div class="form-group full-width">
                                        <label for="card-name">Name on Card <span class="required">*</span></label>
                                        <input type="text" id="card-name" name="cardName" required>
                                    </div>
                                </div>
                            </div>

                            <div class="security-notice">
                                <div class="security-icon">üîí</div>
                                <div class="security-text">
                                    Your payment information is encrypted and secure. We never store your credit card details.
                                </div>
                            </div>
                        </div>
                    </form>

                    <div class="error-message" id="error-message"></div>
                    <div class="success-message" id="success-message"></div>
                </div>

                <!-- Order Summary -->
                <div class="checkout-sidebar">
                    <div class="cart-summary">
                        <h3>Order Summary</h3>
                        ${cart.map(item => `
                            <div class="cart-item">
                                <div class="item-info">
                                    <h4>${item.name}</h4>
                                    <div class="item-details">Quantity: ${item.quantity}</div>
                                </div>
                                <div class="item-price">$${(item.price * item.quantity).toFixed(2)}</div>
                            </div>
                        `).join('')}
                        
                        <div class="price-breakdown">
                            <div class="price-row">
                                <span>Subtotal:</span>
                                <span>$${subtotal.toFixed(2)}</span>
                            </div>
                            <div class="price-row">
                                <span>Shipping:</span>
                                <span>${shipping === 0 ? 'FREE' : '$' + shipping.toFixed(2)}</span>
                            </div>
                            <div class="price-row">
                                <span>Tax:</span>
                                <span>$${tax.toFixed(2)}</span>
                            </div>
                            <div class="price-row total">
                                <span>Total:</span>
                                <span>$${total.toFixed(2)}</span>
                            </div>
                        </div>

                        <button type="submit" form="checkout-form" class="btn" id="place-order-btn">
                            Place Order - $${total.toFixed(2)}
                        </button>
                        <a href="supplements-testkits.html" class="btn btn-secondary">Continue Shopping</a>
                    </div>
                </div>
            `;

            // Add event listeners
            addCheckoutEventListeners();
        }

        function addCheckoutEventListeners() {
            // Payment method selection
            document.querySelectorAll('.payment-method').forEach(method => {
                method.addEventListener('click', () => {
                    document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
                    method.classList.add('selected');
                    
                    const selectedMethod = method.getAttribute('data-method');
                    const cardDetails = document.getElementById('card-details');
                    
                    if (selectedMethod === 'card') {
                        cardDetails.style.display = 'block';
                    } else {
                        cardDetails.style.display = 'none';
                    }
                });
            });

            // Form submission
            document.getElementById('checkout-form').addEventListener('submit', handleFormSubmission);

            // Input formatting
            const cardNumberInput = document.getElementById('card-number');
            const expiryInput = document.getElementById('expiry');
            const cvvInput = document.getElementById('cvv');

            if (cardNumberInput) {
                cardNumberInput.addEventListener('input', (e) => {
                    let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
                    let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                    if (formattedValue.length > 19) formattedValue = formattedValue.substring(0, 19);
                    e.target.value = formattedValue;
                });
            }

            if (expiryInput) {
                expiryInput.addEventListener('input', (e) => {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length >= 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2, 4);
                    }
                    e.target.value = value;
                });
            }

            if (cvvInput) {
                cvvInput.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/\D/g, '').substring(0, 4);
                });
            }
        }

        function handleFormSubmission(e) {
            e.preventDefault();
            
            const btn = document.getElementById('place-order-btn');
            const errorMsg = document.getElementById('error-message');
            const successMsg = document.getElementById('success-message');
            
            // Hide previous messages
            errorMsg.style.display = 'none';
            successMsg.style.display = 'none';
            
            // Show loading state
            btn.classList.add('loading');
            btn.disabled = true;
            btn.innerHTML = 'Processing...';
            
            // Simulate form validation and processing
            setTimeout(() => {
                const formData = new FormData(e.target);
                const data = Object.fromEntries(formData.entries());
                
                // Basic validation
                if (!data.email || !data.phone || !data.firstName || !data.lastName || !data.address || !data.city || !data.state || !data.zip) {
                    showError('Please fill in all required fields.');
                    resetButton(btn);
                    return;
                }

                // Email validation
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(data.email)) {
                    showError('Please enter a valid email address.');
                    resetButton(btn);
                    return;
                }

                // Simulate successful order
                processOrder(data);
                
            }, 2000);
        }

        function processOrder(data) {
            // Store order data for confirmation page
            const orderData = {
                orderId: 'SD-' + Date.now(),
                items: cart,
                customerInfo: data,
                subtotal: cart.reduce((total, item) => total + (item.price * item.quantity), 0),
                tax: cart.reduce((total, item) => total + (item.price * item.quantity), 0) * 0.08,
                shipping: cart.reduce((total, item) => total + (item.price * item.quantity), 0) >= 100 ? 0 : 9.99,
                total: calculateTotal(),
                orderDate: new Date().toISOString()
            };

            localStorage.setItem('orderData', JSON.stringify(orderData));

            // Clear cart
            localStorage.removeItem('cart');
            localStorage.removeItem('staydripped_cart');
            cart = [];

            // Clear global cart if available
            if (window.stayDrippedCart) {
                window.stayDrippedCart.clear();
            }

            // Show success message
            const successMsg = document.getElementById('success-message');
            successMsg.innerHTML = 'Order placed successfully! You will receive a confirmation email shortly.';
            successMsg.style.display = 'block';

            // Redirect to success page after a delay
            setTimeout(() => {
                window.location.href = 'order-confirmation.html';
            }, 2000);
        }

        function showError(message) {
            const errorMsg = document.getElementById('error-message');
            errorMsg.innerHTML = message;
            errorMsg.style.display = 'block';
            errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function resetButton(btn) {
            btn.classList.remove('loading');
            btn.disabled = false;
            btn.innerHTML = `Place Order - $${calculateTotal().toFixed(2)}`;
        }

        function calculateTotal() {
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const shipping = subtotal > 100 ? 0 : 9.99;
            const tax = subtotal * 0.08;
            return subtotal + shipping + tax;
        }

        // Helper functions for appointment data
        function getAppointmentData() {
            return JSON.parse(localStorage.getItem('appointmentData') || '{}');
        }

        function getAppointmentSection() {
            const appointmentData = getAppointmentData();

            if (!appointmentData.appointmentDate) {
                return '';
            }

            return `
                <div class="form-section">
                    <h2 class="section-title">Appointment Details</h2>
                    <div style="background: rgba(0, 102, 204, 0.05); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                            <div>
                                <strong>Date:</strong><br>
                                ${new Date(appointmentData.appointmentDate).toLocaleDateString()}
                            </div>
                            <div>
                                <strong>Time:</strong><br>
                                ${appointmentData.appointmentTime || 'TBD'}
                            </div>
                            <div>
                                <strong>Location Type:</strong><br>
                                ${appointmentData.serviceLocation || 'TBD'}
                            </div>
                        </div>
                        ${appointmentData.specialInstructions ? `
                            <div style="margin-top: 16px;">
                                <strong>Special Instructions:</strong><br>
                                ${appointmentData.specialInstructions}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function getAddressTitle() {
            const appointmentData = getAppointmentData();
            return appointmentData.appointmentDate ? 'Service Address' : 'Shipping Address';
        }

        function prefillContactInfo() {
            const appointmentData = getAppointmentData();

            if (appointmentData.contactName) {
                const nameParts = appointmentData.contactName.split(' ');
                const firstNameInput = document.getElementById('first-name');
                const lastNameInput = document.getElementById('last-name');

                if (firstNameInput && nameParts[0]) {
                    firstNameInput.value = nameParts[0];
                }
                if (lastNameInput && nameParts.length > 1) {
                    lastNameInput.value = nameParts.slice(1).join(' ');
                }
            }

            if (appointmentData.contactPhone) {
                const phoneInput = document.getElementById('phone');
                if (phoneInput) {
                    phoneInput.value = appointmentData.contactPhone;
                }
            }

            if (appointmentData.serviceAddress) {
                const addressInput = document.getElementById('address');
                if (addressInput) {
                    addressInput.value = appointmentData.serviceAddress;
                }
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            renderCheckout();

            // Prefill contact info from appointment data
            setTimeout(prefillContactInfo, 100);
        });
    </script>

    <body>
      <!-- Load Navigation -->
      <div id="navigation-placeholder"></div>

      <div class="container">
        <div class="confirmation-card floating-particles">
          <div class="success-icon">‚úì</div>

          <h1 class="confirmation-title">Order Confirmed!</h1>
          <p class="confirmation-subtitle">
            Thank you for your order! We're excited to support your wellness journey with our premium supplements and
            test
            kits.
          </p>

          <div class="order-details">
            <div class="order-number" id="order-number">
              Order #SD-2024-001</div>

            <div class="details-grid">
              <div class="detail-item">
                <div class="detail-label">Order Date</div>
                <div class="detail-value" id="order-date">
                  January 15, 2024
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Estimated Delivery</div>
                <div class="detail-value" id="delivery-date">
                  3-5 Business Days
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Email Confirmation</div>
                <div class="detail-value">
                  Sent ‚úì
                </div>
              </div>
            </div>
          </div>

          <div class="next-steps">
            <h3>What Happens Next?</h3>
            <ul class="steps-list">
              <li>
                <div class="step-number">1</div>
                <div class="step-text">You'll receive an email confirmation with your order details</div>
              </li>
              <li>
                <div class="step-number">2</div>
                <div class="step-text">We'll prepare and ship your supplements within 1-2 business days</div>
              </li>
              <li>
                <div class="step-number">3</div>
                <div class="step-text">Test kits will include easy-to-follow collection instructions</div>
              </li>
              <li>
                <div class="step-number">4</div>
                <div class="step-text">Results will be available in your patient portal within 5-7 days</div>
              </li>
            </ul>
          </div>

          <div class="action-buttons">
            <a href="supplements-testkits.html" class="btn">Continue Shopping</a>
            <a href="../index.html" class="btn btn-secondary">Return Home</a>
          </div>

          <div class="contact-info">
            <h4>Need Help?</h4>
            <div class="contact-details">
              <div class="contact-item">
                <span>üìß</span>
                <span><strong>Email:</strong> orders@staydrippediv.com</span>
              </div>
              <div class="contact-item">
                <span>üìû</span>
                <span><strong>Phone:</strong> (602) 688-9825</span>
              </div>
              <div class="contact-item">
                <span>üí¨</span>
                <span><strong>Hours:</strong> Mon-Fri 9AM-6PM MST</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Optimized Navigation Loader -->
      <script src="../shared/navigation-loader-optimized.js"></script>

      <script>
        document.addEventListener('DOMContentLoaded', () => {
                // Get order data from localStorage
                const orderData = JSON.parse(localStorage.getItem('orderData') || '{}');
    
                // Generate or use stored order number
                const orderNumber = orderData.orderId || 'SD-' + new Date().getFullYear() + '-' + Math.floor(Math.random() * 10000).toString().padStart(4, '0');
                document.getElementById('order-number').textContent = 'Order #' + orderNumber;
    
                // Set order date
                const orderDate = orderData.orderDate ?
                    new Date(orderData.orderDate).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    }) :
                    new Date().toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                document.getElementById('order-date').textContent = orderDate;
    
                // Calculate delivery date (3-5 business days from now)
                const deliveryDate = new Date();
                deliveryDate.setDate(deliveryDate.getDate() + 5);
                const deliveryDateStr = deliveryDate.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                document.getElementById('delivery-date').textContent = deliveryDateStr;
    
                // Display order details if available
                if (orderData.items && orderData.items.length > 0) {
                    const detailsSection = document.querySelector('.order-details');
                    if (detailsSection) {
                        const itemsHtml = `
                            <div style="margin-top: 32px; padding: 24px; background: rgba(0, 102, 204, 0.05); border-radius: 12px; border: 1px solid rgba(0, 102, 204, 0.1);">
                                <h3 style="margin-bottom: 16px; color: var(--primary-blue);">Order Items</h3>
                                ${orderData.items.map(item => `
                                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(0, 102, 204, 0.1);">
                                        <div>
                                            <strong>${item.name}</strong><br>
                                            <small>Quantity: ${item.quantity}</small>
                                        </div>
                                        <div style="font-weight: 600;">$${(item.price * item.quantity).toFixed(2)}</div>
                                    </div>
                                `).join('')}
                                <div style="margin-top: 16px; padding-top: 16px; border-top: 2px solid rgba(0, 102, 204, 0.2);">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                        <span>Subtotal:</span>
                                        <span>$${orderData.subtotal.toFixed(2)}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                        <span>Tax:</span>
                                        <span>$${orderData.tax.toFixed(2)}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                        <span>Travel Fee:</span>
                                        <span>${orderData.shipping === 0 ? 'FREE' : '$' + orderData.shipping.toFixed(2)}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 18px; font-weight: 700; color: var(--primary-blue);">
                                        <span>Total:</span>
                                        <span>$${orderData.total.toFixed(2)}</span>
                                    </div>
                                </div>
                            </div>
                        `;
                        detailsSection.insertAdjacentHTML('beforeend', itemsHtml);
                    }
                }
    
                // Update cart count to 0 since order is complete
                const cartBadge = document.querySelector('.cart-count');
                if (cartBadge) {
                    cartBadge.textContent = '0';
                    cartBadge.style.display = 'none';
                }
    
                // Clear order data after displaying (but keep for a bit in case of refresh)
                setTimeout(() => {
                    localStorage.removeItem('orderData');
                }, 30000); // Keep for 30 seconds
            });
      </script>
    </body>

</html>
</body>

</html>